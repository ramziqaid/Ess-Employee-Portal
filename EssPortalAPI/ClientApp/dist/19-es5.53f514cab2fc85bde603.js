!function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{cXqt:function(e,a,r){"use strict";r.r(a),r.d(a,"OrdersModule",function(){return Pi});var n,c=r("kUHs"),s=r("hzby"),o=r("yyhP"),d=r("SVse"),l=function e(){i(this,e)},u=function e(){i(this,e)},h=function e(){i(this,e)},m=function e(){i(this,e)},f=r("qc5V"),g=r("z6cu"),b=r("UXun"),p=r("lJxs"),v=r("JIr8"),y=r("AytR"),D=r("8Y7J"),q=((n=function(){function e(t){i(this,e),this.apiService=t,this.baseUrl=y.a.apiUrl}return t(e,[{key:"getRequestType",value:function(){return this.requestType$||(this.requestType$=this.apiService.get("RequestType").pipe(Object(b.a)())),this.requestType$}},{key:"getSystemCode",value:function(e){return this.apiService.get("SystemCode").pipe(Object(p.a)(function(t){return t.filter(function(t){return t.systemCodeType==e})}),Object(v.a)(this.handleError))}},{key:"getRequestList",value:function(e){return this.apiService.post("Requests/GetRequestList",e).pipe(Object(b.a)(),Object(v.a)(this.handleError))}},{key:"getNextPrivateNumber",value:function(){return this.apiService.get("Requests/GetNextPrivateNumber").pipe(Object(b.a)())}},{key:"getRequest",value:function(e){return this.apiService.get("Requests/"+e).pipe(Object(b.a)())}},{key:"getRequestStage",value:function(e){return this.apiService.get("Requests/GetOrderStage/"+e).pipe(Object(b.a)())}},{key:"saveRequest",value:function(e){return null==e.request.requestID||e.request.requestID<1?this.apiService.post("Requests/CreateOrder",e).pipe(Object(v.a)(this.handleError)):this.apiService.post("Requests/UpdateOrder",e).pipe(Object(v.a)(this.handleError))}},{key:"approvalRequest",value:function(e){return this.apiService.post("Requests/ApprovalOrder",e).pipe(Object(b.a)(),Object(v.a)(this.handleError))}},{key:"deleteRequest",value:function(e){return this.apiService.delete("Requests/DeleteRequest/"+e).pipe(Object(v.a)(this.handleError))}},{key:"handleError",value:function(e){return e.error instanceof ErrorEvent?(console.error("An error occurred:",e.error.message),Object(g.a)(e.error.message)):(console.error("Backend returned code ".concat(e.status,", body was: ").concat(e.error," ")),Object(g.a)(e))}}]),e}()).\u0275fac=function(e){return new(e||n)(D.lc(f.a))},n.\u0275prov=D.Xb({token:n,factory:n.\u0275fac}),n),I=r("ey9i"),E=r("ORmt"),N=r("7jyU"),F=r("IfEn"),M=r("wd/R"),O=r("iInd"),S=r("UhP/"),C=r("PDjf"),x=r("BSbQ"),w=r("s7LF"),R=r("VDRc"),T=r("M+Ei"),_=r("Q2Ze"),j=r("TN/R"),A=r("ZTz/"),k=r("e6WT"),B=r("TSSN"),P=["heroForm"];function L(e,t){if(1&e&&(D.hc(0,"small",28),D.hc(1,"small",29),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(19);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function U(e,t){if(1&e&&(D.hc(0,"small",28),D.hc(1,"small",29),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(21);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function V(e,t){if(1&e&&(D.hc(0,"mat-option",30),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function Q(e,t){if(1&e&&(D.hc(0,"small",28),D.hc(1,"small",29),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(33);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Y(e,t){if(1&e&&(D.hc(0,"small",28),D.hc(1,"small",29),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(47);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function H(e,t){if(1&e&&(D.hc(0,"small",28),D.hc(1,"small",29),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(57);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var J,G=((J=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.minFromDate=new Date,this.maxToDate=(new Date).setDate(30),this.bsFromDate=new Date,this.bsToDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.reasonCode="",this.days=1,this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadVisaDLL(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.RemoteWork,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.newObj.request.statusCode!=N.b.NewRequest?(this.alertify.error("MSG_REQUET_NOT_NEW_STAGE"),this.actionBar.editMode()):this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");var i=M(this.bsToDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(i))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(87,t),this.addUpdateExtraField(88,i),this.addUpdateExtraField(91,this.reason),this.addUpdateExtraField(90,this.reasonCode),this.addUpdateExtraField(89,this.days),this.addUpdateExtraField(92,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadVisaDLL",value:function(){var e=this;this.sharedService.getSystemCodeCategory(N.d.Code_RWS).subscribe(function(t){e.reasonTypeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.reason=this.getExtraFieldValue(91),this.reasonCode=this.getExtraFieldValue(90),this.days=null!=this.getExtraFieldValue(89)?Number(this.getExtraFieldValue(89)):1,this.justification=this.getExtraFieldValue(92),this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(87)),this.bsToDate=this.helpersService.getDate(this.getExtraFieldValue(88))}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t,e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]};return e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"dateRangeChange",value:function(e,t){if(this.days=0,e.value&&t.value){var i=M(this.bsFromDate).format("DD/MM/YYYY"),a=M(this.bsToDate).format("DD/MM/YYYY");this.days=this.helpersService.dayDiff(i,a)}}},{key:"ReasonselectedValue",value:function(e){this.reason=e.source.triggerValue}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||J)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},J.\u0275cmp=D.Vb({type:J,selectors:[["app-remoteWork"]],viewQuery:function(e,t){var i;1&e&&(D.jd(P,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:60,vars:49,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","full-width","appearance","fill"],["required","",3,"min","rangePicker"],["matStartDate","","id","fromDate","name","FromDate","required","","placeholder","Start date",3,"ngModel","disabled","min","max","ngModelChange"],["refFromDate","ngModel"],["matEndDate","","id","toDate","name","ToDate","required","","placeholder","End date",3,"ngModel","min","max","disabled","ngModelChange","dateChange"],["refToDate","ngModel"],["matSuffix","",3,"for"],["picker",""],["class","form-error-msg",4,"ngIf"],["appearance","fill",1,"full-width"],["required","","name","Reason","id","Reason",3,"disabled","ngModel","selectionChange","ngModelChange"],["refReason","ngModel"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["matInput","","type","number","name","Days","id","Days","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["refDays","ngModel"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[1,"form-error-msg"],[3,"hidden"],[3,"value"]],template:function(e,t){if(1&e){var i=D.ic();D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"mat-date-range-input",10),D.hc(18,"input",11,12),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.hc(20,"input",13,14),D.pc("ngModelChange",function(e){return t.bsToDate=e})("dateChange",function(){D.Uc(i);var e=D.Qc(19),a=D.Qc(21);return t.dateRangeChange(e,a)}),D.gc(),D.gc(),D.cc(22,"mat-datepicker-toggle",15),D.cc(23,"mat-date-range-picker",null,16),D.gc(),D.dd(25,L,4,4,"small",17),D.dd(26,U,4,4,"small",17),D.gc(),D.hc(27,"div",7),D.hc(28,"mat-form-field",18),D.hc(29,"mat-label"),D.fd(30),D.uc(31,"translate"),D.gc(),D.hc(32,"mat-select",19,20),D.pc("selectionChange",function(e){return t.ReasonselectedValue(e)})("ngModelChange",function(e){return t.reasonCode=e}),D.dd(34,V,2,2,"mat-option",21),D.gc(),D.dd(35,Q,4,4,"small",17),D.gc(),D.gc(),D.gc(),D.hc(36,"div",6),D.hc(37,"div",7),D.hc(38,"mat-form-field",18),D.hc(39,"input",22),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(40,"translate"),D.gc(),D.gc(),D.gc(),D.hc(41,"div",7),D.hc(42,"mat-form-field",18),D.hc(43,"mat-label"),D.fd(44),D.uc(45,"translate"),D.gc(),D.hc(46,"input",23,24),D.pc("ngModelChange",function(e){return t.days=e}),D.uc(48,"translate"),D.gc(),D.dd(49,Y,4,4,"small",17),D.gc(),D.gc(),D.gc(),D.hc(50,"div",25),D.hc(51,"div",7),D.hc(52,"mat-form-field",18),D.hc(53,"mat-label"),D.fd(54),D.uc(55,"translate"),D.gc(),D.hc(56,"textarea",26,27),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(58,"                          "),D.gc(),D.dd(59,H,4,4,"small",17),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()}if(2&e){var a=D.Qc(7),r=D.Qc(19),n=D.Qc(21),c=D.Qc(24),s=D.Qc(33),o=D.Qc(47),d=D.Qc(57);D.Nb(3),D.Bc("disabled",!a.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd(" ",D.vc(16,37,"PERIOD")," "),D.Nb(2),D.Bc("min",t.minFromDate)("rangePicker",c),D.Nb(1),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("min",t.minFromDate)("max",t.maxToDate),D.Nb(2),D.Bc("ngModel",t.bsToDate)("min",t.minFromDate)("max",t.maxToDate)("disabled",t.editMode),D.Nb(2),D.Bc("for",c),D.Nb(3),D.Bc("ngIf",!r.valid&&(r.dirty||r.touched)&&!t.editMode),D.Nb(1),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(4),D.hd("",D.vc(31,39,"REASON")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.reasonCode),D.Nb(2),D.Bc("ngForOf",t.reasonTypeList),D.Nb(1),D.Bc("ngIf",!s.valid&&(s.dirty||s.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(40,41,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd("",D.vc(45,43,"COUNT_DAYS")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(48,45,"COUNT_DAYS")," "),D.Bc("ngModel",t.days)("disabled",!0),D.Nb(3),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(55,47,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!d.valid&&(d.dirty||d.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,j.a,j.h,w.c,w.z,w.r,w.u,j.g,j.f,_.i,j.b,d.q,A.a,d.p,k.b,w.w,w.m,S.o],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),J),W=["heroForm"];function $(e,t){1&e&&(D.hc(0,"mat-error"),D.fd(1,"Date should be inferior"),D.gc())}function z(e,t){if(1&e&&(D.hc(0,"small",23),D.hc(1,"small",24),D.fd(2),D.uc(3,"translate"),D.gc(),D.dd(4,$,2,0,"mat-error",25),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,3,"FILED_IS_REQUIRED")," "),D.Nb(2),D.Bc("ngIf",i.hasError("matDatepickerMax"))}}function X(e,t){if(1&e&&(D.hc(0,"mat-option",26),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function K(e,t){if(1&e&&(D.hc(0,"small",23),D.hc(1,"small",24),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(34);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Z(e,t){if(1&e&&(D.hc(0,"small",23),D.hc(1,"small",24),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(44);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var ee,te=((ee=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate=new Date,this.attachment=[],this.extraFiled=[],this.minFromDate=new Date,this.editMode=!0,this.title="New",this.isAdmin=!1,this.clearanceTypeCode="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadclearanceType(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.EmployeeClearanceForm,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(76,this.clearanceType),this.addUpdateExtraField(77,this.clearanceTypeCode),this.addUpdateExtraField(75,t),this.addUpdateExtraField(78,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadclearanceType",value:function(){var e=this;this.sharedService.getSystemCodeCategory(N.d.Code_CLT).subscribe(function(t){e.clearanceTypeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.clearanceType=this.getExtraFieldValue(76),this.clearanceTypeCode=this.getExtraFieldValue(77),this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(75)),this.justification=this.getExtraFieldValue(78)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]};return e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"selectedValue",value:function(e){this.clearanceType=e.source.triggerValue}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||ee)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},ee.\u0275cmp=D.Vb({type:ee,selectors:[["app-clearance"]],viewQuery:function(e,t){var i;1&e&&(D.jd(W,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:47,vars:33,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["matInput","","name","FromDate","id","FromDate","required","",3,"ngModel","disabled","min","matDatepicker","ngModelChange"],["refFromDate","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker2",""],["class","form-error-msg",4,"ngIf"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["required","","name","ClearanceType","id","ClearanceType",3,"disabled","ngModel","selectionChange","ngModelChange"],["refClearanceType","ngModel"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[1,"form-error-msg"],[3,"hidden"],[4,"ngIf"],[3,"value"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"input",10,11),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.cc(19,"mat-datepicker-toggle",12),D.cc(20,"mat-datepicker",13,14),D.gc(),D.dd(22,z,5,5,"small",15),D.gc(),D.gc(),D.hc(23,"div",6),D.hc(24,"div",7),D.hc(25,"mat-form-field",9),D.hc(26,"input",16),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(27,"translate"),D.gc(),D.gc(),D.gc(),D.hc(28,"div",7),D.hc(29,"mat-form-field",9),D.hc(30,"mat-label"),D.fd(31),D.uc(32,"translate"),D.gc(),D.hc(33,"mat-select",17,18),D.pc("selectionChange",function(e){return t.selectedValue(e)})("ngModelChange",function(e){return t.clearanceTypeCode=e}),D.dd(35,X,2,2,"mat-option",19),D.gc(),D.dd(36,K,4,4,"small",15),D.gc(),D.gc(),D.gc(),D.hc(37,"div",20),D.hc(38,"div",7),D.hc(39,"mat-form-field",9),D.hc(40,"mat-label"),D.fd(41),D.uc(42,"translate"),D.gc(),D.hc(43,"textarea",21,22),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(45,"                          "),D.gc(),D.dd(46,Z,4,4,"small",15),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(21),n=D.Qc(34),c=D.Qc(44);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd(" ",D.vc(16,25,"FROM_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("min",t.minFromDate)("matDatepicker",r),D.Nb(2),D.Bc("for",r),D.Nb(3),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(27,27,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd("",D.vc(32,29,"CLEARANCE_TYPE")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.clearanceTypeCode),D.Nb(2),D.Bc("ngForOf",t.clearanceTypeList),D.Nb(1),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(42,31,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!c.valid&&(c.dirty||c.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,k.b,w.c,j.d,w.z,w.r,w.u,j.f,_.i,j.c,d.q,A.a,d.p,w.m,_.b,S.o],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),ee),ie=r("Y7HM"),ae=["heroForm"];function re(e,t){if(1&e&&(D.hc(0,"mat-option",30),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.ID),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.NameEN:i.NameAR," ")}}function ne(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function ce(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(28);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function se(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(42);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function oe(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(53);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function de(e,t){1&e&&(D.hc(0,"mat-error"),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"FILED_IS_REQUIRED"),""))}function le(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(65);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function ue(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(75);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var he,me=((he=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.loanTypeCode="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadLoanType(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.LoanRequest,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");if(0==this.loanAmount||0==this.noOfInstallmen)return;this.addUpdateExtraField(8,this.loanTypeID),this.addUpdateExtraField(45,this.loanTypeCode),this.addUpdateExtraField(9,t),this.addUpdateExtraField(10,Number(this.loanAmount)),this.addUpdateExtraField(13,Number(this.noOfInstallmen)),this.addUpdateExtraField(15,this.justification);var i=this.loanAmount/this.noOfInstallmen;i=Number(i.toFixed(2)),this.monthlyInstallment=i,this.addUpdateExtraField(12,i),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadLoanType",value:function(){var e=this;this.sharedService.getLoanTypes().subscribe(function(t){e.loanType=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.loanTypeID=null!=this.getExtraFieldValue(8)?Number(this.getExtraFieldValue(8)):0,this.loanAmount=null!=this.getExtraFieldValue(10)?Number(this.getExtraFieldValue(10)):0,this.monthlyInstallment=null!=this.getExtraFieldValue(12)?Number(this.getExtraFieldValue(12)):0,this.noOfInstallmen=null!=this.getExtraFieldValue(13)?Number(this.getExtraFieldValue(13)):0,this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(9)),this.justification=this.getExtraFieldValue(15)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]},t=new Date;return this.bsFromDate=t,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"amountChangeFn",value:function(e){if(Object(ie.a)(e)){if(Object(ie.a)(this.noOfInstallmen)){var t=Number(e)/this.noOfInstallmen;t=Number(t.toFixed(2)),this.monthlyInstallment=t}}else this.monthlyInstallment=0,this.noOfInstallmen=0}},{key:"noOfInstallmenChangeFn",value:function(e){if(Object(ie.a)(e)){if(Object(ie.a)(this.loanAmount)){var t=this.loanAmount/Number(e);t=Number(t.toFixed(2)),this.monthlyInstallment=t}}else this.loanAmount=0,this.noOfInstallmen=0}},{key:"selectedValue",value:function(e){this.loanTypeCode=e.source.triggerValue}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||he)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},he.\u0275cmp=D.Vb({type:he,selectors:[["app-loan"]],viewQuery:function(e,t){var i;1&e&&(D.jd(ae,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:78,vars:60,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["required","","name","LoanType","id","loanType",3,"disabled","ngModel","selectionChange","ngModelChange"],["refLoanType","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-error-msg",4,"ngIf"],["matInput","","type","number","name","LoanAmount","id","loanAmount","required","","min","1",3,"placeholder","ngModel","disabled","ngModelChange"],["refLoanAmount","ngModel"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["matInput","","name","FromDate","id","FromDate","required","",3,"ngModel","disabled","matDatepicker","ngModelChange"],["refFromDate","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker",""],["matInput","","type","number","name","NoOfInstallmen","id","NoOfInstallmen","required","","min","10","max","100",3,"placeholder","ngModel","disabled","ngModelChange"],["refNoOfInstallmen","ngModel"],[4,"ngIf"],["matInput","","type","number","name","MonthlyInstallment","id","MonthlyInstallment","required","","min","1",3,"placeholder","ngModel","disabled","ngModelChange"],["refMonthlyInstallment","ngModel"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[3,"value"],[1,"form-error-msg"],[3,"hidden"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"mat-select",10,11),D.pc("selectionChange",function(e){return t.selectedValue(e)})("ngModelChange",function(e){return t.loanTypeID=e}),D.dd(19,re,2,2,"mat-option",12),D.gc(),D.dd(20,ne,4,4,"small",13),D.gc(),D.gc(),D.hc(21,"div",7),D.hc(22,"div",7),D.hc(23,"mat-form-field",9),D.hc(24,"mat-label"),D.fd(25),D.uc(26,"translate"),D.gc(),D.hc(27,"input",14,15),D.pc("ngModelChange",function(e){return t.loanAmount=e})("ngModelChange",function(e){return t.amountChangeFn(e)}),D.uc(29,"translate"),D.gc(),D.gc(),D.dd(30,ce,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.hc(31,"div",6),D.hc(32,"div",7),D.hc(33,"mat-form-field",9),D.hc(34,"input",16),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(35,"translate"),D.gc(),D.gc(),D.gc(),D.hc(36,"div",7),D.hc(37,"mat-form-field",9),D.hc(38,"mat-label"),D.fd(39),D.uc(40,"translate"),D.gc(),D.hc(41,"input",17,18),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.cc(43,"mat-datepicker-toggle",19),D.cc(44,"mat-datepicker",20,21),D.gc(),D.dd(46,se,4,4,"small",13),D.gc(),D.hc(47,"div",7),D.hc(48,"mat-form-field",9),D.hc(49,"mat-label"),D.fd(50),D.uc(51,"translate"),D.gc(),D.hc(52,"input",22,23),D.pc("ngModelChange",function(e){return t.noOfInstallmen=e})("ngModelChange",function(e){return t.noOfInstallmenChangeFn(e)}),D.uc(54,"translate"),D.gc(),D.gc(),D.dd(55,oe,4,4,"small",13),D.dd(56,de,3,3,"mat-error",24),D.gc(),D.gc(),D.hc(57,"div",6),D.hc(58,"div",7),D.hc(59,"div",7),D.hc(60,"mat-form-field",9),D.hc(61,"mat-label"),D.fd(62),D.uc(63,"translate"),D.gc(),D.hc(64,"input",25,26),D.pc("ngModelChange",function(e){return t.monthlyInstallment=e}),D.uc(66,"translate"),D.gc(),D.gc(),D.dd(67,le,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.hc(68,"div",27),D.hc(69,"div",7),D.hc(70,"mat-form-field",9),D.hc(71,"mat-label"),D.fd(72),D.uc(73,"translate"),D.gc(),D.hc(74,"textarea",28,29),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(76,"                          "),D.gc(),D.dd(77,ue,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(28),n=D.Qc(42),c=D.Qc(45),s=D.Qc(53),o=D.Qc(65),d=D.Qc(75);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd("",D.vc(16,40,"LOAN_TYPE")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.loanTypeID),D.Nb(2),D.Bc("ngForOf",t.loanType),D.Nb(1),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(26,42,"LOAN_AMOUNT")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(29,44,"LOAN_AMOUNT")," "),D.Bc("ngModel",t.loanAmount)("disabled",t.editMode),D.Nb(3),D.Bc("ngIf",!r.valid&&(r.dirty||r.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(35,46,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd(" ",D.vc(40,48,"LOAN_START_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("matDatepicker",c),D.Nb(2),D.Bc("for",c),D.Nb(3),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(4),D.hd("",D.vc(51,50,"NO_OF_INSTALLMEN")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(54,52,"NO_OF_INSTALLMEN")," "),D.Bc("ngModel",t.noOfInstallmen)("disabled",t.editMode),D.Nb(3),D.Bc("ngIf",!s.valid&&(s.dirty||s.touched)&&!t.editMode),D.Nb(1),D.Bc("ngIf",s.hasError("min")),D.Nb(6),D.hd("",D.vc(63,54,"MONTHLY_INSTALLMENT")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(66,56,"MONTHLY_INSTALLMENT")," "),D.Bc("ngModel",t.monthlyInstallment)("disabled",!0),D.Nb(3),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(73,58,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!d.valid&&(d.dirty||d.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,A.a,w.z,w.r,w.u,d.p,d.q,k.b,w.w,w.c,j.d,j.f,_.i,j.c,w.m,S.o,_.b],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),he),fe=r("OaSA"),ge=r("5QHs"),be=r("LUZP"),pe=r("zQhy"),ve=r("Dxy4"),ye=r("f44v"),De=r("Tj54");function qe(e,t){if(1&e&&(D.hc(0,"mat-option",37),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.requestTypeID),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.requestNameEn:i.requestNameAr," ")}}function Ie(e,t){if(1&e&&(D.hc(0,"mat-option",37),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function Ee(e,t){1&e&&(D.hc(0,"mat-header-cell"),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"INDEX")," "))}function Ne(e,t){if(1&e&&(D.hc(0,"mat-cell"),D.fd(1),D.gc()),2&e){var i=t.index;D.Nb(1),D.gd(i+1)}}function Fe(e,t){1&e&&(D.hc(0,"mat-header-cell",38),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"ORDER_NUMBER")," "))}function Me(e,t){if(1&e&&(D.hc(0,"mat-cell",39),D.fd(1),D.gc()),2&e){var i=t.$implicit;D.Nb(1),D.hd(" ",i.RequsetPrivateNumber," ")}}function Oe(e,t){1&e&&(D.hc(0,"mat-header-cell",38),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"ORDER_TYPE")," "))}function Se(e,t){if(1&e&&(D.hc(0,"mat-cell",40),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.RequestNameEn:i.RequestNameAr," ")}}function Ce(e,t){1&e&&(D.hc(0,"mat-header-cell",38),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"EMPLOYEE_NAME")," "))}function xe(e,t){if(1&e&&(D.hc(0,"mat-cell",41),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.EnglishName:i.ArabicName," ")}}function we(e,t){1&e&&(D.hc(0,"mat-header-cell",38),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"CREATED_DATE")," "))}function Re(e,t){if(1&e&&(D.hc(0,"mat-cell",42),D.fd(1),D.gc()),2&e){var i=t.$implicit;D.Nb(1),D.hd(" ",i.CreatedDate," ")}}function Te(e,t){1&e&&(D.hc(0,"mat-header-cell",38),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"ORDER_STATUS")," "))}function _e(e,t){if(1&e&&(D.hc(0,"mat-cell",43),D.hc(1,"mat-chip",44),D.fd(2),D.gc(),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.ad("color",i.color),D.Nb(1),D.Bc("color","CSR01"==i.StatusCode?"primary":"CSR04"==i.StatusCode?"warn":"CSR02"==i.StatusCode?"accent":"CSR05"==i.StatusCode?"color2":""),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.StatusNameEN:i.StatusNameAR," ")}}function je(e,t){1&e&&(D.hc(0,"mat-header-cell"),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.gd(D.vc(2,1,"ACTIONS")))}var Ae=function(){return{debug:!0}};function ke(e,t){if(1&e){var i=D.ic();D.hc(0,"mat-cell",45),D.hc(1,"button",46),D.pc("click",function(){D.Uc(i);var e=t.$implicit;return D.tc().btnRout(e.RequestTypeID,e.RequestID)}),D.uc(2,"translate"),D.hc(3,"mat-icon"),D.fd(4,"visibility"),D.gc(),D.gc(),D.gc()}2&e&&(D.ad("color",t.$implicit.color),D.Nb(1),D.Cc("title",D.vc(2,4,"VIEW")),D.Bc("queryParams",D.Gc(6,Ae)))}function Be(e,t){1&e&&D.cc(0,"mat-header-row")}function Pe(e,t){1&e&&D.cc(0,"mat-row")}var Le,Ue=function(){return[10,25,100]},Ve=((Le=function(){function e(t,a,r,n){i(this,e),this.requestService=t,this.alertify=a,this.router=r,this.authService=n,this.displayedColumns=["index","RequsetPrivateNumber","RequestNameAr","EnglishName","CreatedDate","StatusNameEN","action"],this.btnRout=function(e,t){var i="/Orders/NewOrders/";switch(e){case 5:i+="Amendment/";break;case 15:i+="ChangeHousing/";break;case 25:i+="Clearance/";break;case 35:i+="Leave/";break;case 51:i+="Loan/";break;case 20:i+="ExitReEntryVisa/";break;case 40:i+="EOS/";break;case 65:i+="RemoteWork/"}this.router.navigate([i,t])}}return t(e,[{key:"ngOnInit",value:function(){this.loadRequestStatus(),this.loadRequestType(),this.myOrder="0"}},{key:"loadRequestStatus",value:function(){var e=this;this.requestService.getSystemCode(N.d.Code_CSR).subscribe(function(t){e.statusList=t;var i=new E.c;i.systemCode="-1",i.descriptionEn="All",i.descriptionAr="\u0627\u0644\u0643\u0644",e.statusList.unshift(i),e.requestStatusCode="-1"},function(e){return console.log(e)})}},{key:"loadRequestType",value:function(){var e=this;this.requestService.getRequestType().subscribe(function(t){e.requestType=t,e.General=e.requestType.filter(function(e){return 1==e.requestGroupID&&e.isActive}),e.Government=e.requestType.filter(function(e){return 2==e.requestGroupID&&e.isActive}),e.Letters=e.requestType.filter(function(e){return 3==e.requestGroupID&&e.isActive});var i=new h;i.requestTypeID=-1,i.requestNameEn="All",i.requestNameAr="\u0627\u0644\u0643\u0644",e.General.unshift(i),e.requestTypeId=-1},function(e){return console.log(e)})}},{key:"onSubmit",value:function(){var e=this,t={requestID:-1,requsetPrivateNumber:null,employeeID:this.authService.logginEmployeeId(),managerId:-1,requestTypeID:this.requestTypeId,statusCode:"-1"==this.requestStatusCode?null:this.requestStatusCode,showMyEmployee:"1"==this.myOrder};this.requestService.getRequestList(t).subscribe(function(t){e.dataSource=new fe.o(t),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort},function(t){e.alertify.error(t)})}}]),e}()).\u0275fac=function(e){return new(e||Le)(D.bc(q),D.bc(I.a),D.bc(O.g),D.bc(I.b))},Le.\u0275cmp=D.Vb({type:Le,selectors:[["app-my-orders"]],viewQuery:function(e,t){var i;1&e&&(D.jd(ge.a,!0),D.jd(be.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.paginator=i.first),D.Pc(i=D.qc())&&(t.sort=i.first))},decls:64,vars:29,consts:[[3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","33",1,"pr-16"],[1,"pb-16"],["aria-label","Select an option","name","myOrder",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["fxFlex","100","fxFlex.gt-xs","25",1,"pr-16"],["appearance","fill",2,"width","80%"],["required","","name","requestTypeID",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","","name","status",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.gt-xs","10",1,"pr-16"],["mat-raised-button","","color","primary",1,"background2",3,"disabled"],[1,"ml-8","mr-8","mt-8","pb-16"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","index"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RequsetPrivateNumber"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","number",4,"matCellDef"],["matColumnDef","RequestNameAr"],["data-label","orderType",4,"matCellDef"],["matColumnDef","EnglishName"],["data-label","employeeName",4,"matCellDef"],["matColumnDef","CreatedDate"],["data-label","createdDate",4,"matCellDef"],["matColumnDef","StatusNameEN"],["data-label","status",3,"color",4,"matCellDef"],["matColumnDef","action"],["data-label","color",3,"color",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],[3,"value"],["mat-sort-header",""],["data-label","number"],["data-label","orderType"],["data-label","employeeName"],["data-label","createdDate"],["data-label","status"],["selected","",3,"color"],["data-label","color"],["mat-icon-button","","mat-sm-button","","color","primary","aria-label","reset",1,"mr-16",3,"title","queryParams","click"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card"),D.hc(1,"form",0,1),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(3,"div",2),D.hc(4,"div",3),D.hc(5,"div",4),D.hc(6,"mat-label"),D.fd(7),D.uc(8,"translate"),D.gc(),D.hc(9,"mat-radio-group",5),D.pc("ngModelChange",function(e){return t.myOrder=e}),D.hc(10,"mat-radio-button",6),D.fd(11),D.uc(12,"translate"),D.gc(),D.hc(13,"mat-radio-button",7),D.fd(14),D.uc(15,"translate"),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(16,"div",8),D.hc(17,"div",4),D.hc(18,"mat-form-field",9),D.hc(19,"mat-label"),D.fd(20),D.uc(21,"translate"),D.gc(),D.hc(22,"mat-select",10),D.pc("ngModelChange",function(e){return t.requestTypeId=e}),D.dd(23,qe,2,2,"mat-option",11),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(24,"div",8),D.hc(25,"div",4),D.hc(26,"mat-form-field",9),D.hc(27,"mat-label"),D.fd(28),D.uc(29,"translate"),D.gc(),D.hc(30,"mat-select",12),D.pc("ngModelChange",function(e){return t.requestStatusCode=e}),D.dd(31,Ie,2,2,"mat-option",11),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(32,"div",13),D.hc(33,"div",4),D.hc(34,"button",14),D.fd(35),D.uc(36,"translate"),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(37,"div",15),D.hc(38,"div",16),D.hc(39,"mat-table",17),D.fc(40,18),D.dd(41,Ee,3,3,"mat-header-cell",19),D.dd(42,Ne,2,1,"mat-cell",20),D.ec(),D.fc(43,21),D.dd(44,Fe,3,3,"mat-header-cell",22),D.dd(45,Me,2,1,"mat-cell",23),D.ec(),D.fc(46,24),D.dd(47,Oe,3,3,"mat-header-cell",22),D.dd(48,Se,2,1,"mat-cell",25),D.ec(),D.fc(49,26),D.dd(50,Ce,3,3,"mat-header-cell",22),D.dd(51,xe,2,1,"mat-cell",27),D.ec(),D.fc(52,28),D.dd(53,we,3,3,"mat-header-cell",22),D.dd(54,Re,2,1,"mat-cell",29),D.ec(),D.fc(55,30),D.dd(56,Te,3,3,"mat-header-cell",22),D.dd(57,_e,3,4,"mat-cell",31),D.ec(),D.fc(58,32),D.dd(59,je,3,3,"mat-header-cell",19),D.dd(60,ke,5,7,"mat-cell",33),D.ec(),D.dd(61,Be,1,0,"mat-header-row",34),D.dd(62,Pe,1,0,"mat-row",35),D.gc(),D.cc(63,"mat-paginator",36),D.gc(),D.gc()),2&e){var i=D.Qc(2);D.Nb(7),D.hd("",D.vc(8,16,"SEARCH_ON")," "),D.Nb(2),D.Bc("ngModel",t.myOrder),D.Nb(2),D.hd("",D.vc(12,18,"MY_ORDERS")," "),D.Nb(3),D.hd(" ",D.vc(15,20,"MY_EMPLOYEE")," "),D.Nb(6),D.hd("",D.vc(21,22,"ORDER_TYPE")," "),D.Nb(2),D.Bc("ngModel",t.requestTypeId),D.Nb(1),D.Bc("ngForOf",t.General),D.Nb(5),D.hd("",D.vc(29,24,"ORDER_STATUS")," "),D.Nb(2),D.Bc("ngModel",t.requestStatusCode),D.Nb(1),D.Bc("ngForOf",t.statusList),D.Nb(3),D.Bc("disabled",i.invalid),D.Nb(1),D.hd("",D.vc(36,26,"SEARCH")," "),D.Nb(4),D.Bc("dataSource",t.dataSource),D.Nb(22),D.Bc("matHeaderRowDef",t.displayedColumns),D.Nb(1),D.Bc("matRowDefColumns",t.displayedColumns),D.Nb(1),D.Bc("pageSizeOptions",D.Gc(28,Ue))}},directives:[C.a,w.D,w.s,w.t,R.d,R.b,_.g,pe.b,w.r,w.u,pe.a,_.c,A.a,w.z,d.p,ve.b,fe.n,be.a,fe.c,fe.i,fe.b,fe.k,fe.m,ge.a,S.o,fe.h,fe.a,be.b,ye.a,De.a,fe.j,fe.l],pipes:[B.c],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}.mr-16[_ngcontent-%COMP%]:hover{cursor:pointer}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#f5f5f5}.mat-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.mat-column-action[_ngcontent-%COMP%], .mat-column-CreatedDate[_ngcontent-%COMP%], .mat-column-index[_ngcontent-%COMP%], .mat-column-RequestID[_ngcontent-%COMP%]{min-width:100px!important;max-width:100px!important}.mat-column-StatusNameEN[_ngcontent-%COMP%]{min-width:150px!important;max-width:150px!important}"]}),Le),Qe=r("3sEA"),Ye=r("iELJ");function He(e,t){1&e&&(D.hc(0,"mat-header-cell",21),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"INDEX")," "))}function Je(e,t){if(1&e&&(D.hc(0,"mat-cell"),D.fd(1),D.gc()),2&e){var i=t.index;D.Nb(1),D.gd(i+1)}}function Ge(e,t){1&e&&(D.hc(0,"mat-header-cell",21),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"EMPLOYEE_NAME")," "))}function We(e,t){if(1&e&&(D.hc(0,"mat-cell",22),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Nb(1),D.hd(" ","1"==a.data.currentLang?i.EmpActionEnglishName:i.EmpActionArabicName," ")}}function $e(e,t){1&e&&(D.hc(0,"mat-header-cell",21),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"TYPE_ACTION")," "))}function ze(e,t){if(1&e&&(D.hc(0,"mat-cell",23),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Nb(1),D.hd(" ","1"==a.data.currentLang?i.ActionTypeEN:i.ActionTypeAR," ")}}function Xe(e,t){1&e&&(D.hc(0,"mat-header-cell",21),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"DATE")," "))}function Ke(e,t){if(1&e&&(D.hc(0,"mat-cell",24),D.fd(1),D.gc()),2&e){var i=t.$implicit;D.ad("color",i.color),D.Nb(1),D.hd(" ",i.CreateDate," ")}}function Ze(e,t){1&e&&(D.hc(0,"mat-header-cell",21),D.fd(1),D.uc(2,"translate"),D.gc()),2&e&&(D.Nb(1),D.hd(" ",D.vc(2,1,"JUSTIFICATION")," "))}function et(e,t){if(1&e&&(D.hc(0,"mat-cell",24),D.fd(1),D.gc()),2&e){var i=t.$implicit;D.ad("color",i.color),D.Nb(1),D.hd(" ",i.Justification,"")}}function tt(e,t){1&e&&D.cc(0,"mat-header-row")}function it(e,t){1&e&&D.cc(0,"mat-row")}var at,rt=function(){return[5,10,25,100]},nt=((at=function(){function e(t,a,r){i(this,e),this.data=t,this.dialogRef=a,this.requestService=r,this.displayedColumns=["index","employeeName","action","createdDate","note"]}return t(e,[{key:"ngOnInit",value:function(){this.buildItemForm(this.data)}},{key:"ngAfterViewInit",value:function(){}},{key:"buildItemForm",value:function(e){var t=this;this.requestService.getRequestStage(e.RequestID).subscribe(function(e){t.dataSource=new fe.o(e),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort})}}]),e}()).\u0275fac=function(e){return new(e||at)(D.bc(Ye.a),D.bc(Ye.g),D.bc(q))},at.\u0275cmp=D.Vb({type:at,selectors:[["app-ngx-table-popup"]],viewQuery:function(e,t){var i;1&e&&(D.jd(ge.a,!0),D.jd(be.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.paginator=i.first),D.Pc(i=D.qc())&&(t.sort=i.first))},decls:31,vars:11,consts:[["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"mt-16"],["matDialogTitle",""],[1,"ml-8","mr-8","mt-8","pb-16"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","index"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","employeeName"],["data-label","progress",4,"matCellDef"],["matColumnDef","action"],["data-label","name",4,"matCellDef"],["matColumnDef","createdDate"],["data-label","color",3,"color",4,"matCellDef"],["matColumnDef","note"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["fxFlex","100",1,"mt-16"],["mat-button","","color","warn","type","button",3,"click"],["mat-sort-header",""],["data-label","progress"],["data-label","name"],["data-label","color"]],template:function(e,t){1&e&&(D.hc(0,"div",0),D.hc(1,"div",1),D.hc(2,"h1",2),D.fd(3),D.uc(4,"translate"),D.gc(),D.gc(),D.gc(),D.hc(5,"div",3),D.hc(6,"div",4),D.hc(7,"mat-table",5),D.fc(8,6),D.dd(9,He,3,3,"mat-header-cell",7),D.dd(10,Je,2,1,"mat-cell",8),D.ec(),D.fc(11,9),D.dd(12,Ge,3,3,"mat-header-cell",7),D.dd(13,We,2,1,"mat-cell",10),D.ec(),D.fc(14,11),D.dd(15,$e,3,3,"mat-header-cell",7),D.dd(16,ze,2,1,"mat-cell",12),D.ec(),D.fc(17,13),D.dd(18,Xe,3,3,"mat-header-cell",7),D.dd(19,Ke,2,3,"mat-cell",14),D.ec(),D.fc(20,15),D.dd(21,Ze,3,3,"mat-header-cell",7),D.dd(22,et,2,3,"mat-cell",14),D.ec(),D.dd(23,tt,1,0,"mat-header-row",16),D.dd(24,it,1,0,"mat-row",17),D.gc(),D.cc(25,"mat-paginator",18),D.gc(),D.gc(),D.hc(26,"div",0),D.hc(27,"div",19),D.hc(28,"button",20),D.pc("click",function(){return t.dialogRef.close(!1)}),D.fd(29),D.uc(30,"translate"),D.gc(),D.gc(),D.gc()),2&e&&(D.Nb(3),D.gd(D.vc(4,6,"ORDER_STAGE_DETAILS")),D.Nb(4),D.Bc("dataSource",t.dataSource),D.Nb(16),D.Bc("matHeaderRowDef",t.displayedColumns),D.Nb(1),D.Bc("matRowDefColumns",t.displayedColumns),D.Nb(1),D.Bc("pageSizeOptions",D.Gc(10,rt)),D.Nb(4),D.hd(" ",D.vc(30,8,"CLOSE"),""))},directives:[R.d,R.b,fe.n,be.a,fe.c,fe.i,fe.b,fe.k,fe.m,ge.a,ve.b,fe.h,be.b,fe.a,fe.j,fe.l],pipes:[B.c],encapsulation:2}),at),ct=r("zHaW"),st=r("w9WL");function ot(e,t){if(1&e&&D.fd(0),2&e){var i=t.row;D.hd(" ",null==i?null:i.RequsetPrivateNumber," ")}}function dt(e,t){if(1&e&&D.fd(0),2&e){var i=t.row,a=D.tc();D.hd(" ","1"==a.authService.currentLang?i.RequestNameEn:i.RequestNameAr," ")}}function lt(e,t){if(1&e&&D.fd(0),2&e){var i=t.row,a=D.tc();D.hd(" ","1"==a.authService.currentLang?i.EnglishName:i.ArabicName," ")}}function ut(e,t){1&e&&D.fd(0),2&e&&D.hd(" ",t.row.CreatedDate," ")}function ht(e,t){if(1&e&&(D.hc(0,"mat-chip",5),D.fd(1),D.gc()),2&e){var i=t.row,a=D.tc();D.Bc("color","CSR01"==i.StatusID?"primary":"accent"),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.StatusNameEN:i.StatusNameAR," ")}}function mt(e,t){1&e&&(D.hc(0,"input",6),D.pc("ngModelChange",function(e){return t.row.reason=e}),D.gc()),2&e&&D.Bc("ngModel",t.row.reason)}function ft(e,t){if(1&e){var i=D.ic();D.hc(0,"button",7),D.pc("click",function(){D.Uc(i);var e=t.row;return D.tc().approval(e)}),D.fd(1),D.uc(2,"translate"),D.gc(),D.hc(3,"button",8),D.pc("click",function(){D.Uc(i);var e=t.row;return D.tc().reject(e)}),D.fd(4),D.uc(5,"translate"),D.gc()}2&e&&(D.Nb(1),D.hd(" ",D.vc(2,2,"APPROVAL")," "),D.Nb(3),D.hd(" ",D.vc(5,4,"REJECT")," "))}var gt=function(){return{debug:!0}};function bt(e,t){if(1&e){var i=D.ic();D.hc(0,"button",9),D.pc("click",function(){D.Uc(i);var e=t.row;return D.tc().openPopUp(e)}),D.uc(1,"translate"),D.hc(2,"mat-icon"),D.fd(3,"format_list_numbered "),D.gc(),D.gc(),D.hc(4,"button",10),D.pc("click",function(){D.Uc(i);var e=t.row;return D.tc().btnRout(e.RequestTypeID,e.RequestID)}),D.uc(5,"translate"),D.hc(6,"mat-icon"),D.fd(7,"visibility"),D.gc(),D.gc()}2&e&&(D.Cc("title",D.vc(1,3,"ORDER_STAGE_DETAILS")),D.Nb(4),D.Cc("title",D.vc(5,5,"VIEW")),D.Bc("queryParams",D.Gc(7,gt)))}var pt,vt=((pt=function(){function e(t,a,r,n,c,s,o){i(this,e),this.requestService=t,this.alertify=a,this.dialog=r,this.loader=n,this.snack=c,this.router=s,this.authService=o,this.btnRout=function(e,t){var i="/Orders/NewOrders/";switch(e){case 5:i+="Amendment/";break;case 15:i+="ChangeHousing/";break;case 51:i+="Loan/"}this.router.navigate([i,t])}}return t(e,[{key:"ngOnInit",value:function(){this.loadRequest()}},{key:"loadRequest",value:function(){var e=this,t={requestID:-1,requsetPrivateNumber:null,employeeID:-1,managerId:this.authService.logginEmployeeId(),requestTypeID:-1,statusCode:null,showMyEmployee:!1};this.requestService.getRequestList(t).subscribe(function(t){e.items=t},function(t){e.alertify.error(t)})}},{key:"openPopUp",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dialog.open(nt,{width:"920px",disableClose:!0,data:{RequestID:t.RequestID,currentLang:this.authService.currentLang}}).afterClosed().subscribe(function(i){i&&(e.loader.open(),e.items=t,e.loader.close(),e.snack.open("Member Added!","OK",{duration:4e3}))})}},{key:"approval",value:function(e){var t=this,i={RequestID:e.RequestID,StageTypeID:e.NextStageTypeID,UserID:this.authService.logginUserID(),ActionCode:N.a.Approved,Justification:null};this.alertify.confirm("DO_YOU_WANT_APPROVAL_ORDER",function(){t.requestService.approvalRequest(i).subscribe(function(e){t.loadRequest()},function(e){t.alertify.error(e)})})}},{key:"reject",value:function(e){var t=this,i={RequestID:e.RequestID,StageTypeID:e.NextStageTypeID,UserID:this.authService.logginUserID(),ActionCode:N.a.Rejected,Justification:e.reason};null!=e.reason&&0!=e.reason.length?this.alertify.confirm("DO_YOU_WANT_APPROVAL_ORDER",function(){t.requestService.approvalRequest(i).subscribe(function(e){t.loadRequest()},function(e){t.alertify.error(e)})}):this.alertify.error("MSG_REASON_REJECTION_MUST_ENTERED")}}]),e}()).\u0275fac=function(e){return new(e||pt)(D.bc(q),D.bc(I.a),D.bc(Ye.b),D.bc(Qe.a),D.bc(ct.a),D.bc(O.g),D.bc(I.b))},pt.\u0275cmp=D.Vb({type:pt,selectors:[["app-approval-orders"]],decls:26,vars:36,consts:[[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],[3,"name","width"],["ngx-datatable-cell-template",""],["name","Stage",3,"sortable","width"],["mat-sm-chip","","selected","",3,"color"],["matInput","","type","text","name","reason",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",1,"background2",3,"click"],["mat-flat-button","","mat-sm-button","","color","warn",1,"mr-16",3,"click"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-16","color2",3,"title","click"],["mat-icon-button","","mat-sm-button","","color","primary","aria-label","reset",1,"mr-16","color1",3,"title","queryParams","click"]],template:function(e,t){1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-content",0),D.hc(2,"ngx-datatable",1),D.hc(3,"ngx-datatable-column",2),D.uc(4,"translate"),D.dd(5,ot,1,1,"ng-template",3),D.gc(),D.hc(6,"ngx-datatable-column",2),D.uc(7,"translate"),D.dd(8,dt,1,1,"ng-template",3),D.gc(),D.hc(9,"ngx-datatable-column",2),D.uc(10,"translate"),D.dd(11,lt,1,1,"ng-template",3),D.gc(),D.hc(12,"ngx-datatable-column",2),D.uc(13,"translate"),D.dd(14,ut,1,1,"ng-template",3),D.gc(),D.hc(15,"ngx-datatable-column",2),D.uc(16,"translate"),D.dd(17,ht,2,2,"ng-template",3),D.gc(),D.hc(18,"ngx-datatable-column",2),D.uc(19,"translate"),D.dd(20,mt,1,1,"ng-template",3),D.gc(),D.hc(21,"ngx-datatable-column",2),D.uc(22,"translate"),D.dd(23,ft,6,6,"ng-template",3),D.gc(),D.hc(24,"ngx-datatable-column",4),D.dd(25,bt,8,8,"ng-template",3),D.gc(),D.gc(),D.gc(),D.gc()),2&e&&(D.Nb(2),D.Bc("rows",t.items)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),D.Nb(1),D.Cc("name",D.vc(4,22,"ORDER_NUMBER")),D.Bc("width",50),D.Nb(3),D.Dc("name"," ",D.vc(7,24,"ORDER_TYPE"),""),D.Bc("width",100),D.Nb(3),D.Dc("name"," ",D.vc(10,26,"EMPLOYEE_NAME"),""),D.Bc("width",100),D.Nb(3),D.Dc("name"," ",D.vc(13,28,"CREATED_DATE"),""),D.Bc("width",50),D.Nb(3),D.Dc("name"," ",D.vc(16,30,"ORDER_STATUS"),""),D.Bc("width",80),D.Nb(3),D.Dc("name"," ",D.vc(19,32,"REASON_REJECT"),""),D.Bc("width",120),D.Nb(3),D.Dc("name"," ",D.vc(22,34,"ACTIONS"),""),D.Bc("width",80),D.Nb(3),D.Bc("width",20))},directives:[C.a,C.d,st.d,st.b,st.a,ye.a,k.b,w.c,w.r,w.u,ve.b,De.a],pipes:[B.c],styles:["button[_ngcontent-%COMP%]{padding:0;margin-right:1px}[dir=rtl][_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:brown}input[_ngcontent-%COMP%]{border:1px solid}"]}),pt),yt=r("r3oX"),Dt=["heroForm"],qt=["time"],It=["FromDate"];function Et(e,t){if(1&e&&(D.hc(0,"small",29),D.hc(1,"small",30),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Nt(e,t){if(1&e&&(D.hc(0,"small",29),D.hc(1,"small",30),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(25);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Ft(e,t){if(1&e&&(D.hc(0,"mat-option",31),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function Mt(e,t){if(1&e&&(D.hc(0,"small",29),D.hc(1,"small",30),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(41);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Ot(e,t){if(1&e&&(D.hc(0,"small",29),D.hc(1,"small",30),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(62);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var St,Ct=((St=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.helpersService=r,this.authService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.amendmentReasonCode="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadAmendmentReasons(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.Amendment,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(1,this.amendmentReasonCode),this.addUpdateExtraField(2,this.type),this.addUpdateExtraField(3,this.time),this.addUpdateExtraField(4,t),this.addUpdateExtraField(5,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadAmendmentReasons",value:function(){var e=this;this.requestService.getSystemCode(N.d.Code_CAC).subscribe(function(t){e.emendmentReason=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.amendmentReasonCode=this.getExtraFieldValue(1),this.type=this.getExtraFieldValue(2),this.time=this.getExtraFieldValue(3),this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(4)),this.justification=this.getExtraFieldValue(5)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:this.employeeID=this.authService.logginEmployeeId(),requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]};return this.type="CheckIn",new Date,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||St)(D.bc(I.c),D.bc(q),D.bc(I.d),D.bc(I.b),D.bc(O.a),D.bc(I.a),D.bc(S.c))},St.\u0275cmp=D.Vb({type:St,selectors:[["app-amendment"]],viewQuery:function(e,t){var i;1&e&&(D.jd(Dt,!0),D.jd(qt,!0),D.Zc(It,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.time2=i.first),D.Pc(i=D.qc())&&(t.FromDate=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:65,vars:51,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["matInput","","name","FromDate","id","FromDate","required","",3,"ngModel","disabled","matDatepicker","ngModelChange"],["refFromDate","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker",""],["class","form-error-msg",4,"ngIf"],["aria-label","Time","id","time","name","time","readonly","","required","",3,"placeholder","disabled","ngxTimepicker","format","ngModel","ngModelChange"],["reftime","ngModel"],["fullTime",""],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["required","","name","Reason","id","reason",3,"disabled","ngModel","ngModelChange"],["refReason","ngModel"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Select an option","name","Type","required","",3,"disabled","ngModel","ngModelChange"],["value","CheckIn"],["value","CheckOut"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[1,"form-error-msg"],[3,"hidden"],[3,"value"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"input",10,11),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.cc(19,"mat-datepicker-toggle",12),D.cc(20,"mat-datepicker",13,14),D.gc(),D.dd(22,Et,4,4,"small",15),D.gc(),D.hc(23,"div",7),D.hc(24,"input",16,17),D.pc("ngModelChange",function(e){return t.time=e}),D.uc(26,"translate"),D.gc(),D.cc(27,"ngx-material-timepicker",null,18),D.dd(29,Nt,4,4,"small",15),D.gc(),D.gc(),D.hc(30,"div",6),D.hc(31,"div",7),D.hc(32,"mat-form-field",9),D.hc(33,"input",19),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(34,"translate"),D.gc(),D.gc(),D.gc(),D.hc(35,"div",7),D.hc(36,"mat-form-field",9),D.hc(37,"mat-label"),D.fd(38),D.uc(39,"translate"),D.gc(),D.hc(40,"mat-select",20,21),D.pc("ngModelChange",function(e){return t.amendmentReasonCode=e}),D.dd(42,Ft,2,2,"mat-option",22),D.gc(),D.dd(43,Mt,4,4,"small",15),D.gc(),D.gc(),D.hc(44,"div",7),D.hc(45,"mat-label"),D.fd(46),D.uc(47,"translate"),D.gc(),D.hc(48,"mat-radio-group",23),D.pc("ngModelChange",function(e){return t.type=e}),D.hc(49,"mat-radio-button",24),D.fd(50),D.uc(51,"translate"),D.gc(),D.hc(52,"mat-radio-button",25),D.fd(53),D.uc(54,"translate"),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(55,"div",26),D.hc(56,"div",7),D.hc(57,"mat-form-field",9),D.hc(58,"mat-label"),D.fd(59),D.uc(60,"translate"),D.gc(),D.hc(61,"textarea",27,28),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(63,"                          "),D.gc(),D.dd(64,Ot,4,4,"small",15),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(21),n=D.Qc(25),c=D.Qc(28),s=D.Qc(41),o=D.Qc(62);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd(" ",D.vc(16,35,"FROM_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("matDatepicker",r),D.Nb(2),D.Bc("for",r),D.Nb(3),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(2),D.Cc("placeholder",D.vc(26,37,"TIME")),D.Bc("disabled",t.editMode)("ngxTimepicker",c)("format",24)("ngModel",t.time),D.Nb(5),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(34,39,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd("",D.vc(39,41,"REASON")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.amendmentReasonCode),D.Nb(2),D.Bc("ngForOf",t.emendmentReason),D.Nb(1),D.Bc("ngIf",!s.valid&&(s.dirty||s.touched)&&!t.editMode),D.Nb(3),D.hd(" ",D.vc(47,43,"TYPE_ACTION"),""),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.type),D.Nb(2),D.hd(" ",D.vc(51,45,"CHECKIN")," "),D.Nb(3),D.hd(" ",D.vc(54,47,"CHECKIN")," "),D.Nb(6),D.hd("",D.vc(60,49,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,k.b,w.c,j.d,w.z,w.r,w.u,j.f,_.i,j.c,d.q,yt.c,yt.a,A.a,d.p,pe.b,pe.a,w.m,S.o],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),St),xt=r("M9ds"),wt=function(e){return["/Orders/NewOrders/",e]};function Rt(e,t){if(1&e&&(D.hc(0,"div",6),D.hc(1,"div",7),D.hc(2,"div",8),D.cc(3,"span",9),D.gc(),D.hc(4,"div",10),D.hc(5,"h6"),D.fd(6),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=t.$implicit;D.Nb(1),D.Bc("routerLink",D.Hc(5,wt,i.controllerName)),D.Nb(2),D.Pb(i.icons),D.Nb(3),D.gd(i.requestName)}}function Tt(e,t){if(1&e&&(D.hc(0,"div",6),D.hc(1,"div",7),D.hc(2,"div",8),D.cc(3,"span",9),D.gc(),D.hc(4,"div",10),D.hc(5,"h6"),D.fd(6),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=t.$implicit;D.Nb(1),D.Bc("routerLink",D.Hc(5,wt,i.controllerName)),D.Nb(2),D.Pb(i.icons),D.Nb(3),D.gd(i.requestName)}}function _t(e,t){if(1&e&&(D.hc(0,"div",6),D.hc(1,"div",7),D.hc(2,"div",8),D.cc(3,"span",9),D.gc(),D.hc(4,"div",10),D.hc(5,"h6"),D.fd(6),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=t.$implicit;D.Nb(1),D.Bc("routerLink",D.Hc(5,wt,i.controllerName)),D.Nb(2),D.Pb(i.icons),D.Nb(3),D.gd(i.requestName)}}var jt,At=((jt=function(){function e(t){i(this,e),this.requestService=t}return t(e,[{key:"ngOnInit",value:function(){this.loadRequestType()}},{key:"loadRequestType",value:function(){var e=this;this.requestService.getRequestType().subscribe(function(t){e.requestType=t,e.General=e.requestType.filter(function(e){return 1==e.requestGroupID&&e.isActive}),e.Government=e.requestType.filter(function(e){return 2==e.requestGroupID&&e.isActive}),e.Letters=e.requestType.filter(function(e){return 3==e.requestGroupID&&e.isActive})},function(e){return console.log(e)})}}]),e}()).\u0275fac=function(e){return new(e||jt)(D.bc(q))},jt.\u0275cmp=D.Vb({type:jt,selectors:[["app-orderDashBoard"]],decls:10,vars:3,consts:[["mat-align-tabs","center"],["label","General Requsets "],[1,"row","w-100",2,"padding-top","20px"],["class","col-md-3",4,"ngFor","ngForOf"],["label","Government Requsets "],["label","  Letters "],[1,"col-md-3"],[1,"card","border-danger","mx-sm-1","p-3","box",3,"routerLink"],[1,"card","border-danger","shadow","text-warning","p-3","my-card"],["aria-hidden","true"],[1,"text-info","text-center","mt-3"]],template:function(e,t){1&e&&(D.hc(0,"mat-tab-group",0),D.hc(1,"mat-tab",1),D.hc(2,"div",2),D.dd(3,Rt,7,7,"div",3),D.gc(),D.gc(),D.hc(4,"mat-tab",4),D.hc(5,"div",2),D.dd(6,Tt,7,7,"div",3),D.gc(),D.gc(),D.hc(7,"mat-tab",5),D.hc(8,"div",2),D.dd(9,_t,7,7,"div",3),D.gc(),D.gc(),D.gc()),2&e&&(D.Nb(3),D.Bc("ngForOf",t.General),D.Nb(3),D.Bc("ngForOf",t.Government),D.Nb(3),D.Bc("ngForOf",t.Letters))},directives:[xt.b,xt.a,d.p,O.h],styles:[".my-card[_ngcontent-%COMP%]{position:absolute;left:40%;top:-20px;border-radius:50%}.card[_ngcontent-%COMP%]{cursor:pointer}.box[_ngcontent-%COMP%]{height:100px}.mat-card[_ngcontent-%COMP%]{max-width:25%}"]}),jt),kt=["heroForm"],Bt=["time"],Pt=["FromDate"];function Lt(e,t){if(1&e&&(D.hc(0,"small",20),D.hc(1,"small",21),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Ut(e,t){if(1&e&&(D.hc(0,"small",20),D.hc(1,"small",21),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(35);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var Vt,Qt=((Vt=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.amendmentReasonCode="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.ChangeHousing,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(6,t),this.addUpdateExtraField(7,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(6)),this.justification=this.getExtraFieldValue(7)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]},t=new Date;return this.bsFromDate=t,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||Vt)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},Vt.\u0275cmp=D.Vb({type:Vt,selectors:[["app-changeHousing"]],viewQuery:function(e,t){var i;1&e&&(D.jd(kt,!0),D.jd(Bt,!0),D.Zc(Pt,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.time2=i.first),D.Pc(i=D.qc())&&(t.FromDate=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:38,vars:25,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["matInput","","name","FromDate","id","FromDate","required","",3,"ngModel","disabled","matDatepicker","ngModelChange"],["refFromDate","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker",""],["class","form-error-msg",4,"ngIf"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[1,"form-error-msg"],[3,"hidden"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"input",10,11),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.cc(19,"mat-datepicker-toggle",12),D.cc(20,"mat-datepicker",13,14),D.gc(),D.dd(22,Lt,4,4,"small",15),D.gc(),D.gc(),D.hc(23,"div",6),D.hc(24,"div",7),D.hc(25,"mat-form-field",9),D.hc(26,"input",16),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(27,"translate"),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(28,"div",17),D.hc(29,"div",7),D.hc(30,"mat-form-field",9),D.hc(31,"mat-label"),D.fd(32),D.uc(33,"translate"),D.gc(),D.hc(34,"textarea",18,19),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(36,"                          "),D.gc(),D.dd(37,Ut,4,4,"small",15),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(21),n=D.Qc(35);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd(" ",D.vc(16,19,"FROM_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("matDatepicker",r),D.Nb(2),D.Bc("for",r),D.Nb(3),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(27,21,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(6),D.hd("",D.vc(33,23,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,k.b,w.c,j.d,w.z,w.r,w.u,j.f,_.i,j.c,d.q,w.m],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}"]}),Vt),Yt=["heroForm"];function Ht(e,t){if(1&e&&(D.hc(0,"mat-option",44),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.ID),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.NameEN:i.NameAR," ")}}function Jt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Gt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(28);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Wt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(30);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function $t(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(41);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function zt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(56);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Xt(e,t){if(1&e&&(D.hc(0,"mat-option",44),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.employeeID),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.personnelnumber+" "+i.englishName:i.personnelnumber+" "+i.arabicName," ")}}function Kt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(70);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Zt(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(82);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function ei(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(97);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function ti(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.hc(4,"small",46),D.fd(5),D.uc(6,"translate"),D.gc(),D.hc(7,"small",46),D.fd(8),D.uc(9,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(112);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,6,"FILED_IS_REQUIRED")," "),D.Nb(2),D.Bc("hidden",!i.errors.maxlength),D.Nb(1),D.hd(" ",D.vc(6,8,"FILED_IS_MAXLENGTH_20")," "),D.Nb(2),D.Bc("hidden",!i.errors.minlength),D.Nb(1),D.hd(" ",D.vc(9,10,"FILED_IS_MINLENGTH_5")," ")}}function ii(e,t){if(1&e&&(D.hc(0,"small",45),D.hc(1,"small",46),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(122);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var ai,ri=((ai=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.minFromDate=new Date,this.maxToDate=(new Date).setDate(2),this.bsFromDate=new Date,this.bsToDate=new Date,this.vacationBalance=0,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.isReplacementEmp=!1,this.leaveTypeCode="",this.days=1,this.replacementEmployeeName="",this.travelMethodID="0",this.travelMethod="",this.paymentStatusID="0",this.paymentStatus="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadVacationType(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.loadVacationBalace(),this.days=1,this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.LeaveRequestVacations,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");var i=M(this.bsToDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(i))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");if(this.addUpdateExtraField(23,this.leaveTypeID),this.addUpdateExtraField(51,this.leaveTypeCode),this.addUpdateExtraField(54,this.isReplacementEmp?1:0),this.isReplacementEmp&&(this.addUpdateExtraField(24,this.replacementEmployeeID),this.addUpdateExtraField(50,this.replacementEmployeeName),null==this.replacementEmployeeID))return void this.alertify.error("REPLACEMENT_EMPLOYEE_MUST_ENTER");this.addUpdateExtraField(26,t),this.addUpdateExtraField(27,i),this.addUpdateExtraField(28,this.days),this.addUpdateExtraField(29,this.travelMethod),this.addUpdateExtraField(48,this.travelMethodID),this.addUpdateExtraField(30,this.paymentStatus),this.addUpdateExtraField(49,this.paymentStatusID),this.addUpdateExtraField(55,this.vacationBalance),this.addUpdateExtraField(31,this.justification),this.addUpdateExtraField(85,this.address),this.addUpdateExtraField(86,this.phone),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadVacationType",value:function(){var e=this;this.sharedService.getVacationTypes().subscribe(function(t){e.vacationType=t},function(e){return console.log(e)})}},{key:"loadVacationBalace",value:function(){var e=this,t={employeeID:this.authService.logginEmployeeId(),fromDate:this.helpersService.getCurrentDate()};this.sharedService.getVacationBalanceInfo(t).subscribe(function(t){e.vacationBalance=t[0].Balance},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.leaveTypeID=null!=this.getExtraFieldValue(23)?Number(this.getExtraFieldValue(23)):0,this.leaveTypeCode=this.getExtraFieldValue(51),this.replacementEmployeeID=null!=this.getExtraFieldValue(24)?Number(this.getExtraFieldValue(24)):0,this.replacementEmployeeName=this.getExtraFieldValue(50),this.days=null!=this.getExtraFieldValue(28)?Number(this.getExtraFieldValue(28)):1,this.travelMethod=this.getExtraFieldValue(29),this.travelMethodID=this.getExtraFieldValue(48),this.paymentStatus=this.getExtraFieldValue(30),this.paymentStatusID=this.getExtraFieldValue(49),this.isReplacementEmp=Boolean(null!=this.getExtraFieldValue(51)?Number(this.getExtraFieldValue(51)):0),this.justification=this.getExtraFieldValue(31),this.address=this.getExtraFieldValue(85),this.phone=this.getExtraFieldValue(86),this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(26)),this.bsToDate=this.helpersService.getDate(this.getExtraFieldValue(27))}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]},t=new Date;return this.bsFromDate=t,this.bsToDate=t,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"replacementEmployeeSelect",value:function(e){}},{key:"selectedVacation",value:function(e){this.isReplacementEmp=this.vacationType.filter(function(t){return t.ID==e.value&&1==t.IsNeedReplacementEmp}).length>0,this.leaveTypeCode=e.source.triggerValue}},{key:"dateRangeChange",value:function(e,t){if(this.days=0,e.value&&t.value){var i=M(this.bsFromDate).format("DD/MM/YYYY"),a=M(this.bsToDate).format("DD/MM/YYYY");this.days=this.helpersService.dayDiff(i,a)}}},{key:"paymentStatusChange",value:function(e){this.paymentStatus=e}},{key:"travelMethodChange",value:function(e){this.travelMethod=e}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||ai)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},ai.\u0275cmp=D.Vb({type:ai,selectors:[["app-leave"]],viewQuery:function(e,t){var i;1&e&&(D.jd(Yt,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:128,vars:106,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["required","","name","LeaveType","id","leaveType",3,"disabled","ngModel","selectionChange","ngModelChange"],["refLeaveType","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-error-msg",4,"ngIf"],["appearance","full-width","appearance","fill"],["required","",3,"min","rangePicker"],["matStartDate","","id","fromDate","name","FromDate","required","","placeholder","Start date",3,"ngModel","disabled","min","ngModelChange"],["refFromDate","ngModel"],["matEndDate","","id","toDate","name","ToDate","required","","placeholder","End date",3,"ngModel","disabled","ngModelChange","dateChange"],["refToDate","ngModel"],["matSuffix","",3,"for"],["picker",""],["aria-label","Select an option","name","TravelMethodID","required","",3,"disabled","ngModel","ngModelChange"],["refTravelMethodID","ngModel"],["value","0",3,"change"],["value","1",3,"change"],["matInput","","type","text","name","Address","id","Address","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["refAddress","ngModel"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["required","","name","replacementEmployee","id","replacementEmployee",3,"disabled","ngModel","selectionChange","ngModelChange"],["refReplacementEmployee","ngModel"],["cellspacing","0",1,"example-full-width"],["appearance","fill",1,"example-full-width"],["matInput","","type","number","name","days","id","days","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["refDays","ngModel"],["matInput","","type","number","name","vacationBalance","id","vacationBalance",3,"ngModel","disabled","ngModelChange"],["refVacationBalance","ngModel"],["aria-label","Select an option","name","PaymentStatusID","id","PaymentStatusID","required","",3,"disabled","ngModel","ngModelChange"],["refPaymentStatusID","ngModel"],["matInput","","type","text","name","Phone","id","Phone","required","","maxlength","20","minlength","5",3,"placeholder","ngModel","disabled","ngModelChange"],["refPhone","ngModel"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[3,"value"],[1,"form-error-msg"],[3,"hidden"]],template:function(e,t){if(1&e){var i=D.ic();D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"mat-select",10,11),D.pc("selectionChange",function(e){return t.selectedVacation(e)})("ngModelChange",function(e){return t.leaveTypeID=e}),D.dd(19,Ht,2,2,"mat-option",12),D.gc(),D.dd(20,Jt,4,4,"small",13),D.gc(),D.gc(),D.hc(21,"div",7),D.hc(22,"mat-form-field",14),D.hc(23,"mat-label"),D.fd(24),D.uc(25,"translate"),D.gc(),D.hc(26,"mat-date-range-input",15),D.hc(27,"input",16,17),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.hc(29,"input",18,19),D.pc("ngModelChange",function(e){return t.bsToDate=e})("dateChange",function(){D.Uc(i);var e=D.Qc(28),a=D.Qc(30);return t.dateRangeChange(e,a)}),D.gc(),D.gc(),D.cc(31,"mat-datepicker-toggle",20),D.cc(32,"mat-date-range-picker",null,21),D.gc(),D.dd(34,Gt,4,4,"small",13),D.dd(35,Wt,4,4,"small",13),D.gc(),D.hc(36,"div",7),D.hc(37,"mat-label"),D.fd(38),D.uc(39,"translate"),D.gc(),D.hc(40,"mat-radio-group",22,23),D.pc("ngModelChange",function(e){return t.travelMethodID=e}),D.hc(42,"mat-radio-button",24),D.pc("change",function(){return t.travelMethodChange("TICKET")}),D.fd(43),D.uc(44,"translate"),D.gc(),D.hc(45,"mat-radio-button",25),D.pc("change",function(){return t.travelMethodChange("CASH")}),D.fd(46),D.uc(47,"translate"),D.gc(),D.gc(),D.dd(48,$t,4,4,"small",13),D.gc(),D.hc(49,"div",7),D.hc(50,"div",7),D.hc(51,"mat-form-field",9),D.hc(52,"mat-label"),D.fd(53),D.uc(54,"translate"),D.gc(),D.hc(55,"input",26,27),D.pc("ngModelChange",function(e){return t.address=e}),D.uc(57,"translate"),D.gc(),D.gc(),D.dd(58,zt,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.hc(59,"div",6),D.hc(60,"div",7),D.hc(61,"mat-form-field",9),D.hc(62,"input",28),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(63,"translate"),D.gc(),D.gc(),D.gc(),D.hc(64,"div",7),D.hc(65,"mat-form-field",9),D.hc(66,"mat-label"),D.fd(67),D.uc(68,"translate"),D.gc(),D.hc(69,"mat-select",29,30),D.pc("selectionChange",function(e){return t.replacementEmployeeSelect(e)})("ngModelChange",function(e){return t.replacementEmployeeID=e}),D.dd(71,Xt,2,2,"mat-option",12),D.gc(),D.dd(72,Kt,4,4,"small",13),D.gc(),D.gc(),D.hc(73,"div",7),D.hc(74,"table",31),D.hc(75,"tr"),D.hc(76,"td"),D.hc(77,"mat-form-field",32),D.hc(78,"mat-label"),D.fd(79),D.uc(80,"translate"),D.gc(),D.hc(81,"input",33,34),D.pc("ngModelChange",function(e){return t.days=e}),D.uc(83,"translate"),D.gc(),D.gc(),D.dd(84,Zt,4,4,"small",13),D.gc(),D.hc(85,"td"),D.hc(86,"mat-form-field",32),D.hc(87,"mat-label"),D.fd(88),D.uc(89,"translate"),D.gc(),D.hc(90,"input",35,36),D.pc("ngModelChange",function(e){return t.vacationBalance=e}),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(92,"div",7),D.hc(93,"mat-label"),D.fd(94),D.uc(95,"translate"),D.gc(),D.hc(96,"mat-radio-group",37,38),D.pc("ngModelChange",function(e){return t.paymentStatusID=e}),D.hc(98,"mat-radio-button",24),D.pc("change",function(){return t.paymentStatusChange("ADVANCE")}),D.fd(99),D.uc(100,"translate"),D.gc(),D.hc(101,"mat-radio-button",25),D.pc("change",function(){return t.paymentStatusChange("NOT_ADVANCE")}),D.fd(102),D.uc(103,"translate"),D.gc(),D.gc(),D.dd(104,ei,4,4,"small",13),D.gc(),D.hc(105,"div",7),D.hc(106,"div",7),D.hc(107,"mat-form-field",9),D.hc(108,"mat-label"),D.fd(109),D.uc(110,"translate"),D.gc(),D.hc(111,"input",39,40),D.pc("ngModelChange",function(e){return t.phone=e}),D.uc(113,"translate"),D.gc(),D.gc(),D.dd(114,ti,10,12,"small",13),D.gc(),D.gc(),D.gc(),D.hc(115,"div",41),D.hc(116,"div",7),D.hc(117,"mat-form-field",9),D.hc(118,"mat-label"),D.fd(119),D.uc(120,"translate"),D.gc(),D.hc(121,"textarea",42,43),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(123,"                          "),D.gc(),D.dd(124,ii,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.fd(125),D.uc(126,"json"),D.uc(127,"json")}if(2&e){var a=D.Qc(7),r=D.Qc(18),n=D.Qc(28),c=D.Qc(30),s=D.Qc(33),o=D.Qc(41),d=D.Qc(56),l=D.Qc(70),u=D.Qc(82),h=D.Qc(97),m=D.Qc(112),f=D.Qc(122);D.Nb(3),D.Bc("disabled",!a.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd("",D.vc(16,66,"LEAVE_TYPE")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.leaveTypeID),D.Nb(2),D.Bc("ngForOf",t.vacationType),D.Nb(1),D.Bc("ngIf",!r.valid&&(r.dirty||r.touched)&&!t.editMode),D.Nb(4),D.hd(" ",D.vc(25,68,"LEAVE_DATE")," "),D.Nb(2),D.Bc("min",t.minFromDate)("rangePicker",s),D.Nb(1),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("min",t.minFromDate),D.Nb(2),D.Bc("ngModel",t.bsToDate)("disabled",t.editMode),D.Nb(2),D.Bc("for",s),D.Nb(3),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(1),D.Bc("ngIf",!c.valid&&(c.dirty||c.touched)&&!t.editMode),D.Nb(3),D.hd(" ",D.vc(39,70,"TRAVEL_METHOD"),""),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.travelMethodID),D.Nb(3),D.hd(" ",D.vc(44,72,"TICKET")," "),D.Nb(3),D.hd(" ",D.vc(47,74,"CASH")," "),D.Nb(2),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(54,76,"ADDRESS")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(57,78,"ADDRESS")," "),D.Bc("ngModel",t.address)("disabled",t.editMode),D.Nb(3),D.Bc("ngIf",!d.valid&&(d.dirty||d.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(63,80,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd("",D.vc(68,82,"REPLACEMENT_EMPLOYEE")," "),D.Nb(2),D.Bc("disabled",t.editMode||!t.isReplacementEmp)("ngModel",t.replacementEmployeeID),D.Nb(2),D.Bc("ngForOf",t.empoyeeList),D.Nb(1),D.Bc("ngIf",!l.valid&&(l.dirty||l.touched)&&!t.editMode),D.Nb(7),D.hd("",D.vc(80,84,"COUNT_DAYS")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(83,86,"COUNT_DAYS")," "),D.Bc("ngModel",t.days)("disabled",!0),D.Nb(3),D.Bc("ngIf",!u.valid&&(u.dirty||u.touched)&&!t.editMode),D.Nb(4),D.hd("",D.vc(89,88,"VACATION_BALANCE")," "),D.Nb(2),D.Bc("ngModel",t.vacationBalance)("disabled",!0),D.Nb(4),D.hd(" ",D.vc(95,90,"PAYMENT_STATUS"),""),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.paymentStatusID),D.Nb(3),D.hd(" ",D.vc(100,92,"ADVANCE")," "),D.Nb(3),D.hd(" ",D.vc(103,94,"NOT_ADVANCE")," "),D.Nb(2),D.Bc("ngIf",!h.valid&&(h.dirty||h.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(110,96,"PHONE")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(113,98,"PHONE")," "),D.Bc("ngModel",t.phone)("disabled",t.editMode),D.Nb(3),D.Bc("ngIf",!m.valid&&(m.dirty||m.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(120,100,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!f.valid&&(f.dirty||f.touched)&&!t.editMode),D.Nb(1),D.id(" ",D.vc(126,102,a.value),"\n",D.vc(127,104,t.days),"")}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,A.a,w.z,w.r,w.u,d.p,d.q,j.a,j.h,w.c,j.g,j.f,_.i,j.b,pe.b,pe.a,k.b,w.w,w.m,w.n,S.o],pipes:[B.c,d.j],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),ai),ni=["heroForm"];function ci(e,t){if(1&e&&(D.hc(0,"mat-option",26),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function si(e,t){if(1&e&&(D.hc(0,"small",27),D.hc(1,"small",28),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function oi(e,t){if(1&e&&(D.hc(0,"small",27),D.hc(1,"small",28),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(27);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function di(e,t){1&e&&(D.hc(0,"mat-error"),D.fd(1,"Date should be inferior"),D.gc())}function li(e,t){if(1&e&&(D.hc(0,"small",27),D.hc(1,"small",28),D.fd(2),D.uc(3,"translate"),D.gc(),D.dd(4,di,2,0,"mat-error",29),D.gc()),2&e){D.tc();var i=D.Qc(43);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,3,"FILED_IS_REQUIRED")," "),D.Nb(2),D.Bc("ngIf",i.hasError("matDatepickerMax"))}}function ui(e,t){if(1&e&&(D.hc(0,"small",27),D.hc(1,"small",28),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(55);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var hi,mi=((hi=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate1=new Date,this.bsFromDate2=new Date,this.attachment=[],this.extraFiled=[],this.minFromDate=new Date,this.editMode=!0,this.title="New",this.isAdmin=!1,this.eosType="",this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadEOSType(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.EndOfService,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate1).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");var i=M(this.bsFromDate2).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(i))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(56,this.eosTypeCode),this.addUpdateExtraField(57,this.eosType),this.addUpdateExtraField(58,t),this.addUpdateExtraField(61,i),this.addUpdateExtraField(73,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadEOSType",value:function(){var e=this;this.sharedService.getSystemCodeCategory(N.d.Code_EOS).subscribe(function(t){e.eosTypeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.eosTypeCode=this.getExtraFieldValue(56),this.eosType=this.getExtraFieldValue(57),this.bsFromDate1=this.helpersService.getDate(this.getExtraFieldValue(58)),this.bsFromDate2=this.helpersService.getDate(this.getExtraFieldValue(61)),this.justification=this.getExtraFieldValue(73)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]},t=new Date;return this.bsFromDate1=t,this.bsFromDate2=t,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"selectedValue",value:function(e){this.eosType=e.source.triggerValue}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||hi)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},hi.\u0275cmp=D.Vb({type:hi,selectors:[["app-eos"]],viewQuery:function(e,t){var i;1&e&&(D.jd(ni,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:58,vars:42,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["required","","name","EOSType","id","loanType",3,"disabled","ngModel","selectionChange","ngModelChange"],["refEOSType","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-error-msg",4,"ngIf"],["matInput","","name","LastWorkingDateBefore","id","LastWorkingDateBefore","required","",3,"ngModel","disabled","min","matDatepicker","ngModelChange"],["refLastWorkingDateBefore","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker",""],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["matInput","","name","LastWorkingDate","id","LastWorkingDate","required","",3,"ngModel","disabled","min","matDatepicker","ngModelChange"],["refLastWorkingDate","ngModel"],["appDatepicker2",""],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[3,"value"],[1,"form-error-msg"],[3,"hidden"],[4,"ngIf"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"mat-select",10,11),D.pc("selectionChange",function(e){return t.selectedValue(e)})("ngModelChange",function(e){return t.eosTypeCode=e}),D.dd(19,ci,2,2,"mat-option",12),D.gc(),D.dd(20,si,4,4,"small",13),D.gc(),D.gc(),D.hc(21,"div",7),D.hc(22,"mat-form-field",9),D.hc(23,"mat-label"),D.fd(24),D.uc(25,"translate"),D.gc(),D.hc(26,"input",14,15),D.pc("ngModelChange",function(e){return t.bsFromDate1=e}),D.gc(),D.cc(28,"mat-datepicker-toggle",16),D.cc(29,"mat-datepicker",17,18),D.gc(),D.dd(31,oi,4,4,"small",13),D.gc(),D.gc(),D.hc(32,"div",6),D.hc(33,"div",7),D.hc(34,"mat-form-field",9),D.hc(35,"input",19),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(36,"translate"),D.gc(),D.gc(),D.gc(),D.hc(37,"div",7),D.hc(38,"mat-form-field",9),D.hc(39,"mat-label"),D.fd(40),D.uc(41,"translate"),D.gc(),D.hc(42,"input",20,21),D.pc("ngModelChange",function(e){return t.bsFromDate2=e}),D.gc(),D.cc(44,"mat-datepicker-toggle",16),D.cc(45,"mat-datepicker",17,22),D.gc(),D.dd(47,li,5,5,"small",13),D.gc(),D.gc(),D.hc(48,"div",23),D.hc(49,"div",7),D.hc(50,"mat-form-field",9),D.hc(51,"mat-label"),D.fd(52),D.uc(53,"translate"),D.gc(),D.hc(54,"textarea",24,25),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(56,"                          "),D.gc(),D.dd(57,ui,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(27),n=D.Qc(30),c=D.Qc(43),s=D.Qc(46),o=D.Qc(55);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd("",D.vc(16,32,"EOS_TYPE")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.eosTypeCode),D.Nb(2),D.Bc("ngForOf",t.eosTypeList),D.Nb(1),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(4),D.hd(" ",D.vc(25,34,"LAST_WORKING_DATE_BEFORE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate1)("disabled",t.editMode)("min",t.minFromDate)("matDatepicker",n),D.Nb(2),D.Bc("for",n),D.Nb(3),D.Bc("ngIf",!r.valid&&(r.dirty||r.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(36,36,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd(" ",D.vc(41,38,"LAST_WORKING_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate2)("disabled",t.editMode)("min",t.minFromDate)("matDatepicker",s),D.Nb(2),D.Bc("for",s),D.Nb(3),D.Bc("ngIf",!c.valid&&(c.dirty||c.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(53,40,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,A.a,w.z,w.r,w.u,d.p,d.q,k.b,w.c,j.d,j.f,_.i,j.c,w.m,S.o,_.b],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),hi),fi=["heroForm"];function gi(e,t){if(1&e&&(D.hc(0,"mat-option",30),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function bi(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function pi(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(28);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function vi(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(30);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function yi(e,t){if(1&e&&(D.hc(0,"mat-option",30),D.fd(1),D.gc()),2&e){var i=t.$implicit,a=D.tc();D.Bc("value",i.systemCode),D.Nb(1),D.hd(" ","1"==a.authService.currentLang?i.descriptionEn:i.descriptionAr," ")}}function Di(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(47);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function qi(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(56);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Ii(e,t){if(1&e&&(D.hc(0,"small",31),D.hc(1,"small",32),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(66);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var Ei,Ni=((Ei=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.minFromDate=new Date,this.maxToDate=(new Date).setDate(30),this.bsFromDate=new Date,this.bsToDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this.typeVisaCode="",this.reasonCode="",this.days=1,this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.loadVisaDLL(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.ExitReEnterVisa,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");var i=M(this.bsToDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(i))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(32,t),this.addUpdateExtraField(33,i),this.addUpdateExtraField(34,this.typeVisa),this.addUpdateExtraField(71,this.typeVisaCode),this.addUpdateExtraField(35,this.reason),this.addUpdateExtraField(72,this.reasonCode),this.addUpdateExtraField(74,this.days),this.addUpdateExtraField(36,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadVisaDLL",value:function(){var e=this;this.sharedService.getSystemCodeCategory(N.d.Code_VSA).subscribe(function(t){e.visaTypeList=t},function(e){return console.log(e)}),this.sharedService.getSystemCodeCategory(N.d.Code_VSR).subscribe(function(t){e.reasonTypeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.typeVisa=this.getExtraFieldValue(34),this.typeVisaCode=this.getExtraFieldValue(71),this.reason=this.getExtraFieldValue(35),this.reasonCode=this.getExtraFieldValue(72),this.days=null!=this.getExtraFieldValue(74)?Number(this.getExtraFieldValue(74)):1,this.justification=this.getExtraFieldValue(36),this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(32)),this.bsToDate=this.helpersService.getDate(this.getExtraFieldValue(33))}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]};return e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"dateRangeChange",value:function(e,t){if(this.days=0,e.value&&t.value){var i=M(this.bsFromDate).format("DD/MM/YYYY"),a=M(this.bsToDate).format("DD/MM/YYYY");this.days=this.helpersService.dayDiff(i,a)}}},{key:"VISATypeselectedValue",value:function(e){this.typeVisa=e.source.triggerValue}},{key:"ReasonselectedValue",value:function(e){this.reason=e.source.triggerValue}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}()).\u0275fac=function(e){return new(e||Ei)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},Ei.\u0275cmp=D.Vb({type:Ei,selectors:[["app-exitReEntryVisa"]],viewQuery:function(e,t){var i;1&e&&(D.jd(fi,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:69,vars:56,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["required","","name","VISAType","id","VISAType",3,"disabled","ngModel","selectionChange","ngModelChange"],["refVISAType","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-error-msg",4,"ngIf"],["appearance","full-width","appearance","fill"],["required","",3,"min","rangePicker"],["matStartDate","","id","fromDate","name","FromDate","required","","placeholder","Start date",3,"ngModel","disabled","min","max","ngModelChange"],["refFromDate","ngModel"],["matEndDate","","id","toDate","name","ToDate","required","","placeholder","End date",3,"ngModel","min","max","disabled","ngModelChange","dateChange"],["refToDate","ngModel"],["matSuffix","",3,"for"],["picker",""],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["required","","name","Reason","id","Reason",3,"disabled","ngModel","selectionChange","ngModelChange"],["refReason","ngModel"],["matInput","","type","number","name","Days","id","Days","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["refDays","ngModel"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[3,"value"],[1,"form-error-msg"],[3,"hidden"]],template:function(e,t){if(1&e){var i=D.ic();D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"mat-select",10,11),D.pc("selectionChange",function(e){return t.VISATypeselectedValue(e)})("ngModelChange",function(e){return t.typeVisaCode=e}),D.dd(19,gi,2,2,"mat-option",12),D.gc(),D.dd(20,bi,4,4,"small",13),D.gc(),D.gc(),D.hc(21,"div",7),D.hc(22,"mat-form-field",14),D.hc(23,"mat-label"),D.fd(24),D.uc(25,"translate"),D.gc(),D.hc(26,"mat-date-range-input",15),D.hc(27,"input",16,17),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.hc(29,"input",18,19),D.pc("ngModelChange",function(e){return t.bsToDate=e})("dateChange",function(){D.Uc(i);var e=D.Qc(28),a=D.Qc(30);return t.dateRangeChange(e,a)}),D.gc(),D.gc(),D.cc(31,"mat-datepicker-toggle",20),D.cc(32,"mat-date-range-picker",null,21),D.gc(),D.dd(34,pi,4,4,"small",13),D.dd(35,vi,4,4,"small",13),D.gc(),D.gc(),D.hc(36,"div",6),D.hc(37,"div",7),D.hc(38,"mat-form-field",9),D.hc(39,"input",22),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(40,"translate"),D.gc(),D.gc(),D.gc(),D.hc(41,"div",7),D.hc(42,"mat-form-field",9),D.hc(43,"mat-label"),D.fd(44),D.uc(45,"translate"),D.gc(),D.hc(46,"mat-select",23,24),D.pc("selectionChange",function(e){return t.ReasonselectedValue(e)})("ngModelChange",function(e){return t.reasonCode=e}),D.dd(48,yi,2,2,"mat-option",12),D.gc(),D.dd(49,Di,4,4,"small",13),D.gc(),D.gc(),D.hc(50,"div",7),D.hc(51,"mat-form-field",9),D.hc(52,"mat-label"),D.fd(53),D.uc(54,"translate"),D.gc(),D.hc(55,"input",25,26),D.pc("ngModelChange",function(e){return t.days=e}),D.uc(57,"translate"),D.gc(),D.dd(58,qi,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.hc(59,"div",27),D.hc(60,"div",7),D.hc(61,"mat-form-field",9),D.hc(62,"mat-label"),D.fd(63),D.uc(64,"translate"),D.gc(),D.hc(65,"textarea",28,29),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(67,"                          "),D.gc(),D.dd(68,Ii,4,4,"small",13),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()}if(2&e){var a=D.Qc(7),r=D.Qc(18),n=D.Qc(28),c=D.Qc(30),s=D.Qc(33),o=D.Qc(47),d=D.Qc(56),l=D.Qc(66);D.Nb(3),D.Bc("disabled",!a.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd("",D.vc(16,42,"VISA_TYPE")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.typeVisaCode),D.Nb(2),D.Bc("ngForOf",t.visaTypeList),D.Nb(1),D.Bc("ngIf",!r.valid&&(r.dirty||r.touched)&&!t.editMode),D.Nb(4),D.hd(" ",D.vc(25,44,"VISA_DATE")," "),D.Nb(2),D.Bc("min",t.minFromDate)("rangePicker",s),D.Nb(1),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("min",t.minFromDate)("max",t.maxToDate),D.Nb(2),D.Bc("ngModel",t.bsToDate)("min",t.minFromDate)("max",t.maxToDate)("disabled",t.editMode),D.Nb(2),D.Bc("for",s),D.Nb(3),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode),D.Nb(1),D.Bc("ngIf",!c.valid&&(c.dirty||c.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(40,46,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(5),D.hd("",D.vc(45,48,"REASON")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.reasonCode),D.Nb(2),D.Bc("ngForOf",t.reasonTypeList),D.Nb(1),D.Bc("ngIf",!o.valid&&(o.dirty||o.touched)&&!t.editMode),D.Nb(4),D.hd("",D.vc(54,50,"COUNT_DAYS")," "),D.Nb(2),D.Dc("placeholder"," ",D.vc(57,52,"COUNT_DAYS")," "),D.Bc("ngModel",t.days)("disabled",!0),D.Nb(3),D.Bc("ngIf",!d.valid&&(d.dirty||d.touched)&&!t.editMode),D.Nb(5),D.hd("",D.vc(64,54,"JUSTIFICATION")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!l.valid&&(l.dirty||l.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,A.a,w.z,w.r,w.u,d.p,d.q,j.a,j.h,w.c,j.g,j.f,_.i,j.b,k.b,w.w,w.m,S.o],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}#requsetPrivateNumber[_ngcontent-%COMP%]{color:red}"]}),Ei),Fi=["heroForm"];function Mi(e,t){if(1&e&&(D.hc(0,"small",20),D.hc(1,"small",21),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(18);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}function Oi(e,t){if(1&e&&(D.hc(0,"small",20),D.hc(1,"small",21),D.fd(2),D.uc(3,"translate"),D.gc(),D.gc()),2&e){D.tc();var i=D.Qc(35);D.Nb(1),D.Bc("hidden",!i.errors.required),D.Nb(1),D.hd(" ",D.vc(3,2,"FILED_IS_REQUIRED")," ")}}var Si,Ci,xi,wi=[{path:"",data:{title:"My Orders",breadcrumb:"MY_ORDERS",OperationCode:"HTC02"},children:[{path:"MyOrders",component:Ve,data:{title:"My Orders",breadcrumb:"MY_ORDERS",OperationCode:"HTC06"}},{path:"ApprovalOrders",component:vt,data:{title:"Approval of Orders",breadcrumb:"APPROVAL_ORDERS",OperationCode:"HTC07"}}]},{path:"NewOrders",component:At,data:{title:"OrderDashBoardComponent",breadcrumb:"NEW_ORDER",OperationCode:"HTC08"}},{path:"NewOrders",data:{title:"NewOrders ",breadcrumb:"NEW_ORDER",OperationCode:"HTC08"},children:[{path:"Amendment",data:{title:"Amendment",breadcrumb:"AMENDMENT",OperationCode:"HTC09"},children:[{path:"",component:Ct},{path:":RequestID",component:Ct}]},{path:"ChangeHousing",data:{title:"ChangeHousing",breadcrumb:"CHANGE_HOUSING",OperationCode:"HTC10"},children:[{path:"",component:Qt},{path:":RequestID",component:Qt}]},{path:"Leave",data:{title:"Leave",breadcrumb:"LEAVE",OperationCode:"HTC11"},children:[{path:"",component:ri},{path:":RequestID",component:ri}]},{path:"Loan",data:{title:"Loan",breadcrumb:"LOAN",OperationCode:"HTC12"},children:[{path:"",component:me},{path:":RequestID",component:me}]},{path:"EOS",data:{title:"END_OF_SERVICE",breadcrumb:"END_OF_SERVICE",OperationCode:"HTC13"},children:[{path:"",component:mi},{path:":RequestID",component:mi}]},{path:"ExitReEntryVisa",data:{title:"EXIT_REENTRY_VISA",breadcrumb:"EXIT_REENTRY_VISA",OperationCode:"HTC14"},children:[{path:"",component:Ni},{path:":RequestID",component:Ni}]},{path:"Clearance",data:{title:"EMPLOYEE_CLEARANCE",breadcrumb:"EMPLOYEE_CLEARANCE",OperationCode:"HTC15"},children:[{path:"",component:te},{path:":RequestID",component:te}]},{path:"Complaint",data:{title:"COMPLAINT",breadcrumb:"COMPLAINT",OperationCode:"HTC17"},children:[{path:"",component:(Si=function(){function e(t,a,r,n,c,s,o){i(this,e),this.sharedService=t,this.requestService=a,this.authService=r,this.helpersService=n,this._avRoute=c,this.alertify=s,this.dateAdapter=o,this.request=new l,this.bsFromDate=new Date,this.attachment=[],this.extraFiled=[],this.editMode=!0,this.title="New",this.isAdmin=!1,this._avRoute.snapshot.params.RequestID&&(this.requestID=this._avRoute.snapshot.params.RequestID),this.dateAdapter.setLocale("en-GB")}return t(e,[{key:"ngOnInit",value:function(){this.loadEmployees(),this.newObj=this.getEmptyObject(),this.requestID>0&&(this.title="Edit",this.loadRequest(this.requestID)),this.isAdmin=this.authService.isAdminUser}},{key:"onSubmit",value:function(){}},{key:"newClick",value:function(){var e=this;this.heroForm.reset(),this.editMode=!1,this.employeeID=this.authService.logginEmployeeId(),this.newObj=this.getEmptyObject(),this.getNextPrivateNumber(),this.requestID=this.newObj.request.requestID,this.newObj.request.requestTypeID=N.c.ChangeHousing,this.newObj.request.statusCode=N.b.NewRequest,this.authService.currentUserName.subscribe(function(t){e.newObj.request.createdBy=t}),this.newObj.request.employeeID=this.authService.logginEmployeeId()}},{key:"edit",value:function(){this.editMode=!1}},{key:"save",value:function(){var e=this;if(this.findInvalidControls(),this.heroForm.valid){var t=M(this.bsFromDate).format("DD/MM/YYYY");if(!this.sharedService.isCheckDateFormat(t))return void this.alertify.error("FORMATE_DATE_ISNOT_CORRECT");this.addUpdateExtraField(83,t),this.addUpdateExtraField(84,this.justification),this.requestService.saveRequest(this.newObj).subscribe(function(t){e.alertify.success("SAVED_SUCCESSFULLY"),e.heroForm.reset(),e.newObj=t,e.requestID=e.newObj.requestID,e.loadRequest(e.requestID),e.editMode=!0,e.actionBar.editMode()},function(t){e.alertify.error(t)})}}},{key:"delete",value:function(){var e=this;this.requestID>0&&this.alertify.confirm("DO_YOU_WANT_DELETE_ORDER",function(){e.requestService.deleteRequest(e.requestID).subscribe(function(t){e.alertify.success("DELETED_SUCCESSFULLY"),e.reset(),e.actionBar.queryMode()},function(t){e.alertify.error(t)})})}},{key:"findInvalidControls",value:function(){var e=this.heroForm.controls;for(var t in e)e[t].invalid&&this.heroForm.controls[t].markAsTouched({onlySelf:!0})}},{key:"reset",value:function(){this.editMode=!0,this.heroForm.reset()}},{key:"loadEmployees",value:function(){var e=this;this.sharedService.getEmployees().subscribe(function(t){e.empoyeeList=t},function(e){return console.log(e)})}},{key:"loadRequest",value:function(e){var t=this;this.newObj=this.getEmptyObject(),this.requestService.getRequest(e).subscribe(function(e){t.bindData(e),t.actionBar&&t.actionBar.editMode()},function(e){t.alertify.error(e)})}},{key:"bindData",value:function(e){this.newObj.request=e.request,this.newObj.requestStages=e.requestStages,this.newObj.requestExtraFields=e.requestExtraFields,this.requestID=this.newObj.request.requestID,this.employeeID=this.newObj.request.employeeID;try{this.bsFromDate=this.helpersService.getDate(this.getExtraFieldValue(83)),this.justification=this.getExtraFieldValue(84)}catch(t){}}},{key:"getNextPrivateNumber",value:function(){var e=this;this.requestService.getNextPrivateNumber().subscribe(function(t){e.newObj.request.requsetPrivateNumber=t},function(t){e.alertify.error(t)})}},{key:"getEmptyObject",value:function(){var e={request:{requestID:this.sharedService.getRandomNumber(),requsetPrivateNumber:null,employeeID:null,requestTypeID:null,statusCode:null,createdBy:null},requestExtraFields:[],requestStages:[]},t=new Date;return this.bsFromDate=t,e.requestStages[0]=new m,e.requestStages[0].actionCode=N.a.NewRequest,e.requestStages[0].stageTypeID=1,e.requestStages[0].userID=this.authService.logginUserID(),e.requestStages[0].justification=void 0,e}},{key:"addUpdateExtraField",value:function(e,t){var i=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1==i){var a=new u;a.requestExtraFieldID=-Math.floor(this.newObj.requestExtraFields.length+1),a.extraFieldTypeID=e,a.value=t,a.requestID=this.requestID,this.newObj.requestExtraFields.push(a)}else this.newObj.requestExtraFields[i].value=t}},{key:"getExtraFieldValue",value:function(e){var t=this.newObj.requestExtraFields.findIndex(function(t){return t.extraFieldTypeID==e});if(-1!=t)return this.newObj.requestExtraFields[t].value}},{key:"employeeSelect",value:function(e){this.employeeID=e}},{key:"uploadFinished",value:function(e){if(null!=e){var t=new E.a;t.attachmentID=+e,t.referenceID=this.requestID,t.fileName="fileName",t.fileType="fileType",null==this.newObj.attachments&&(this.newObj.attachments=this.attachment),this.newObj.attachments.push(t)}}}]),e}(),Si.\u0275fac=function(e){return new(e||Si)(D.bc(I.c),D.bc(q),D.bc(I.b),D.bc(I.d),D.bc(O.a),D.bc(I.a),D.bc(S.c))},Si.\u0275cmp=D.Vb({type:Si,selectors:[["app-complaint"]],viewQuery:function(e,t){var i;1&e&&(D.jd(Fi,!0),D.jd(F.a,!0)),2&e&&(D.Pc(i=D.qc())&&(t.heroForm=i.first),D.Pc(i=D.qc())&&(t.actionBar=i.first))},decls:38,vars:25,consts:[[1,"p-0"],[1,""],[3,"disabled","referenceID","showPrint","newAction","editAction","saveAction","deleteAction","cancelAction","onUploadFinishedFire"],["novalidate","",3,"ngSubmit"],["heroForm","ngForm"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","50",1,"pr-16"],[1,"pb-16"],[3,"empoyeeList","employee","editMode","employeeSelect"],["appearance","fill",1,"full-width"],["matInput","","name","FromDate","id","FromDate","required","",3,"ngModel","disabled","matDatepicker","ngModelChange"],["refFromDate","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["appDatepicker",""],["class","form-error-msg",4,"ngIf"],["matInput","","name","requsetPrivateNumber","id","requsetPrivateNumber",3,"placeholder","disabled","ngModel","ngModelChange"],["fxFlex","100","fxFlex.gt-xs","100",1,"pr-16"],["matInput","","id","textarea-input","rows","2","name","Justification","maxlength","500","id","Justification","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["refJustification","ngModel"],[1,"form-error-msg"],[3,"hidden"]],template:function(e,t){if(1&e&&(D.hc(0,"mat-card",0),D.hc(1,"mat-card-title",1),D.cc(2,"mat-divider"),D.hc(3,"actionBar",2),D.pc("newAction",function(){return t.newClick()})("editAction",function(){return t.edit()})("saveAction",function(){return t.save()})("deleteAction",function(){return t.delete()})("cancelAction",function(){return t.reset()})("onUploadFinishedFire",function(e){return t.uploadFinished(e)}),D.gc(),D.cc(4,"mat-divider"),D.gc(),D.hc(5,"mat-card-content"),D.hc(6,"form",3,4),D.pc("ngSubmit",function(){return t.onSubmit()}),D.hc(8,"div",5),D.hc(9,"div",6),D.hc(10,"div",7),D.hc(11,"employeeList",8),D.pc("employeeSelect",function(e){return t.employeeSelect(e)}),D.gc(),D.gc(),D.hc(12,"div",7),D.hc(13,"mat-form-field",9),D.hc(14,"mat-label"),D.fd(15),D.uc(16,"translate"),D.gc(),D.hc(17,"input",10,11),D.pc("ngModelChange",function(e){return t.bsFromDate=e}),D.gc(),D.cc(19,"mat-datepicker-toggle",12),D.cc(20,"mat-datepicker",13,14),D.gc(),D.dd(22,Mi,4,4,"small",15),D.gc(),D.gc(),D.hc(23,"div",6),D.hc(24,"div",7),D.hc(25,"mat-form-field",9),D.hc(26,"input",16),D.pc("ngModelChange",function(e){return t.newObj.request.requsetPrivateNumber=e}),D.uc(27,"translate"),D.gc(),D.gc(),D.gc(),D.gc(),D.hc(28,"div",17),D.hc(29,"div",7),D.hc(30,"mat-form-field",9),D.hc(31,"mat-label"),D.fd(32),D.uc(33,"translate"),D.gc(),D.hc(34,"textarea",18,19),D.pc("ngModelChange",function(e){return t.justification=e}),D.fd(36,"                          "),D.gc(),D.dd(37,Oi,4,4,"small",15),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc(),D.gc()),2&e){var i=D.Qc(7),a=D.Qc(18),r=D.Qc(21),n=D.Qc(35);D.Nb(3),D.Bc("disabled",!i.form.valid)("referenceID",t.requestID)("showPrint",!1),D.Nb(8),D.Bc("empoyeeList",t.empoyeeList)("employee",t.employeeID)("editMode",!0),D.Nb(4),D.hd(" ",D.vc(16,19,"FROM_DATE")," "),D.Nb(2),D.Bc("ngModel",t.bsFromDate)("disabled",t.editMode)("matDatepicker",r),D.Nb(2),D.Bc("for",r),D.Nb(3),D.Bc("ngIf",!a.valid&&(a.dirty||a.touched)&&!t.editMode),D.Nb(4),D.Dc("placeholder"," ",D.vc(27,21,"ORDER_NUMBER")," "),D.Bc("disabled",!0)("ngModel",t.newObj.request.requsetPrivateNumber),D.Nb(6),D.hd("",D.vc(33,23,"COMPLAIN_TEXT")," "),D.Nb(2),D.Bc("disabled",t.editMode)("ngModel",t.justification),D.Nb(3),D.Bc("ngIf",!n.valid&&(n.dirty||n.touched)&&!t.editMode)}},directives:[C.a,C.i,x.a,F.a,C.d,w.D,w.s,w.t,R.d,R.b,T.a,_.c,_.g,k.b,w.c,j.d,w.z,w.r,w.u,j.f,_.i,j.c,d.q,w.m],pipes:[B.c],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}mat-label[_ngcontent-%COMP%], mat-radio-button[_ngcontent-%COMP%]{margin:0 10px}#FromDate[_ngcontent-%COMP%], #requestID[_ngcontent-%COMP%], .egret-navy[_ngcontent-%COMP%]   .mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#000!important}mat-card-title[_ngcontent-%COMP%]{padding-bottom:25px}"]}),Si)},{path:":RequestID",component:te}]},{path:"RemoteWork",data:{title:"REMOTE_WORK",breadcrumb:"REMOTE_WORK",OperationCode:"HTC28"},children:[{path:"",component:G},{path:":RequestID",component:G}]}]}],Ri=((Ci=function e(){i(this,e)}).\u0275mod=D.Zb({type:Ci}),Ci.\u0275inj=D.Yb({factory:function(e){return new(e||Ci)},imports:[[O.k.forChild(wi)],O.k]}),Ci),Ti=r("oTcB"),_i=r("hzfI"),ji=r("pMoy"),Ai=r("u9T3"),ki=r("WFH3"),Bi=r("PCNd"),Pi=((xi=function e(){i(this,e)}).\u0275mod=D.Zb({type:xi}),xi.\u0275inj=D.Yb({factory:function(e){return new(e||xi)},providers:[q,B.d,{provide:S.f,useValue:"en-GB"}],imports:[[d.c,w.l,w.y,Ri,s.a.forRoot(),c.a.forRoot(),o.a.forRoot(),pe.c,xt.e,Ti.a,_i.e,ge.b,be.c,fe.p,st.e,k.c,ji.b,ve.c,C.g,De.b,x.b,Ai.a,B.b,Bi.a,C.g,_.e,j.e,A.b,yt.b,ye.e,ki.a]]}),xi)}}])}();